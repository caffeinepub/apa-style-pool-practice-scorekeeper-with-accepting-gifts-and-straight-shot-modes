{
  "kind": "spec_vs_diff_report",
  "version": "1.0",
  "generatedAt": "2026-02-15T02:51:51.263Z",
  "summary": "Diff implements shared-innings logic via a new/updated `useApaInningFlow` hook (innings increment only on B→A), adds state plumbing for `activePlayer`/`sharedInnings` across APA Practice game state, and introduces actor-readiness checks plus delayed retry UI state for both match-save and profile-save flows. However, the diff summary is truncated and does not clearly show the required UI text/labels and inline retry actions for the “Connecting...” states, nor the exact dead-balls UI row placement/content, so some AC items cannot be confirmed from the provided evidence.",
  "missing_requirements": [
    {
      "id": "REQ-130",
      "requirement": "Display dead-ball totals under/adjacent to innings on the APA Practice gameplay screen with clear English labeling, computed client-side and showing 0 when no racks completed.",
      "reason": "While dead-ball counting exists in `ApaRackScoringPanel` (`deadBallCount`) and the file summary claims a dead-balls display, the provided diff snippet for `PracticeGamePage.tsx` is truncated before any innings/dead-balls UI rendering, so the actual labeled UI row (\"Dead Balls:\") and its behavior when zero racks are completed cannot be verified from the evidence shown.",
      "evidence": [
        "frontend/src/components/apa/ApaRackScoringPanel.tsx",
        "frontend/src/pages/apa/PracticeGamePage.tsx (truncated)",
        "frontend-file-summaries.txt"
      ]
    },
    {
      "id": "REQ-132",
      "requirement": "On match-complete screen, the save button must not stay stuck on “Connecting...”; if actor unavailable, show inline English message + “Retry connection” action; clicking save while actor not ready fails fast with clear error; when actor available label becomes “Save Match & Return to History”.",
      "reason": "The diff shows actor availability state, an 8-second timer to show retry UI, and access to `retryConnection`, but the actual match-complete save button rendering (labels, disabled state), inline message, and explicit “Retry connection” action are not visible in the truncated snippet. Therefore the specific UI/label/interaction AC cannot be confirmed.",
      "evidence": [
        "frontend/src/pages/apa/PracticeGamePage.tsx (truncated)"
      ]
    },
    {
      "id": "REQ-133",
      "requirement": "In Edit Profile dialog, the save button must not stay stuck on “Connecting...”; if actor unavailable, show inline English message + “Retry connection” action; clicking save while actor not ready shows clear error and dialog remains usable; when actor available label becomes “Save Changes”.",
      "reason": "The diff shows actor readiness checks (fails fast with a clear toast error) and delayed `showRetryConnection` state, but the truncated snippet does not show the actual primary button label switching (“Connecting...” → “Save Changes”), nor the inline message and the “Retry connection” button wired to `retryConnection`.",
      "evidence": [
        "frontend/src/components/auth/ProfileSetupDialog.tsx (truncated)"
      ]
    }
  ],
  "hallucinated_features": [],
  "confidence": 0.62,
  "changed_files": [
    "frontend-file-summaries.txt",
    "frontend/src/components/apa/ApaRackScoringPanel.tsx",
    "frontend/src/components/apa/useApaInningFlow.ts",
    "frontend/src/components/auth/ProfileSetupDialog.tsx",
    "frontend/src/pages/apa/PracticeGamePage.tsx",
    "project_state.json"
  ]
}