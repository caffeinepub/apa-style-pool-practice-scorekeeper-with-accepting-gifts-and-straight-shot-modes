{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 125,
  "summary": "Next build scope expanded to include a surgical Accepting Gifts overhaul: replace the old Accepting Gifts gameplay/progression with a fixed 12-level sequence (2+8, 3+8, 2+9, 3+9, 4+8, 4+9, 5+8, 5+9, 6+8, 6+9, 7+8, 7+9), dynamic per-level attempt input ranges, baseline/levelPlayed tracking with win/lose progression/rollback rules, and Match History table note formatting to include levelPlayed | baselineLevel | final score (e.g., \"3+9 | 3+9 | 7-4\"), while keeping changes isolated from other app areas.",
  "architectural_notes": [
    "Straight Shot is a drill scored by total strokes/shots (goal: 20 or under) with mode-specific stats including scratches (+2) and a moving average across sessions; ensure UI copy avoids calling it 'straight pool'.",
    "APA mode must be APA 9-ball (Equalizer points), not an 8-ball-style race; remove/avoid any 'race to X' concepts in UI and logic.",
    "APA 9-ball session tracking should support rack-by-rack 10-point accounting: player A points + player B points + dead balls = 10 each rack; include 9-ball worth 2, dead balls worth 0, and support defensive shots + innings for correct PPI.",
    "APA 9-ball rules constraints to encode: no push-outs (standard handicapped APA 9-ball), 9-on-the-snap ends rack with 2 points, three consecutive fouls within a rack loses the rack and remaining balls become dead.",
    "APA 9-ball active scoring UI should mirror official APA scorekeeper flow: per-rack display of balls 1–9, tap-to-select pocketed balls for the current inning, Turn Over control to switch players, innings auto-increment logic, and in-flow toggles/controls to mark dead balls and defensive shots.",
    "APA 9-ball practice rule: when the 9-ball is pocketed early (ends the rack), all remaining balls in that rack should be marked dead (0 points) to preserve 10-point rack accounting.",
    "Accepting Gifts progression: user wants minimum object balls = 2 (not 1) and the starting ball count for a new session should default to the last saved/current count from the prior session; also provide a manual reset/override to any allowed count (e.g., jump to 7).",
    "Introduce a per-device/account \"Primary Player\" concept so the app recognizes the main user across matches while still allowing ad-hoc opponent names.",
    "Results UX: keep individual match view; add navigation/button to a per-player Aggregate Stats view with graphs computed from that player name across saved matches.",
    "Privacy/team rollout: implement optional invite-only access control for Internet Identity by maintaining an allowlist of approved principals plus a pending-requests list for owner approval (Approve/Reject + 'Reject All Pending'); non-approved users are blocked; plan for a future toggle to disable this for public release."
  ],
  "known_issues": [
    "Regression/bug: Match History sort control (toggle Newest/Oldest by match date) is missing/not shown even when history list contains matches (user reports 3 matches visible but no sort option).",
    "Official/Real APA Match Log: Save gets stuck on \"Connecting\" after entering inputs (cannot complete save). Likely save-mutation/network/actor readiness state deadlock.",
    "APA Practice: when the match is effectively over (player reached/exceeded points-to-win), the \"Complete Rack\" button becomes unclickable/disabled, preventing the user from finishing the rack and progressing past the scoring screen.",
    "APA Practice: score can exceed the points-to-win target in the edge case where a player is 1 point away and then pockets the 9-ball (2 points), causing the total to update past the target; must clamp/stop correctly on match completion.",
    "Official/Real APA Match Log: aPPI is missing (not computed/stored/displayed) under PPI in Match Details and elsewhere Official APA appears.",
    "Match History Table view: APA-derived columns (PPI/aPPI/rolling 10/20/APA 10/20/W-L/win%) render blank for APA matches even when underlying data exists.",
    "Stats (Official APA): win% windowing appears to use last-10 (or other smaller window) instead of last-20 matches (ordered by match date).",
    "Stats → Official APA tab: PPI Trend chart renders blank (should plot PPI and aPPI lines by match date with a legend).",
    "Stats → Official APA tab: Match Results chart renders blank (should plot My Points, Opponent Points, Defensive Shots lines by match date with a legend).",
    "Deployed build still shows Official APA charts not rendering; user requests fixing graphs and adding console debug taps immediately before data is passed into Recharts <Line> components to verify the final datasets."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-create-the-core-app-navigation-and-information-architecture-for-a-pool-scorekeeper-app-with-three-modes-1-apa-style-practice-scorekeeping-similar-to-the-official-apa-scorekeeper-app-2-accepting-gifts-and-3-straight-shot",
      "title": "Create the core app navigation and information architecture for a pool scorekeeper app with three modes: (1) APA-style practice scorekeeping similar to the official APA Scorekeeper app, (2) Accepting Gifts, and (3) Straight Shot.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-build-an-apa-style-practice-scorekeeping-flow-ui-data-capture-that-lets-a-user-track-a-practice-match-in-a-way-that-is-recognizable-and-usable-as-an-apa-style-scorekeeper-for-practice-including-at-minimum-players-race-target-or-equivalent-match-goal-current-score-and-per-visit-inning-events-entry",
      "title": "Build an APA-style practice scorekeeping flow (UI + data capture) that lets a user track a practice match in a way that is recognizable and usable as an APA-style scorekeeper for practice, including at minimum: players, race/target (or equivalent match goal), current score, and per-visit/inning events entry.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-accepting-gifts-mode-with-end-to-end-creation-in-progress-tracking-and-completion-saving-include-a-dedicated-screen-to-display-the-accepting-gifts-rules-and-scoring-method-and-implement-the-scoring-logic-according-to-the-user-provided-rules",
      "title": "Add an Accepting Gifts mode with end-to-end creation, in-progress tracking, and completion saving; include a dedicated screen to display the Accepting Gifts rules and scoring method, and implement the scoring logic according to the user-provided rules.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-straight-shot-mode-with-end-to-end-creation-in-progress-tracking-and-completion-saving-implement-the-scoring-inputs-and-summary-appropriate-for-a-straight-shot-practice-game-e-g-attempts-makes-streaks-or-other-metrics-with-exact-tracked-fields-configurable-based-on-user-clarification",
      "title": "Add a Straight Shot mode with end-to-end creation, in-progress tracking, and completion saving; implement the scoring inputs and summary appropriate for a Straight Shot practice game (e.g., attempts, makes, streaks, or other metrics), with exact tracked fields configurable based on user clarification.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-match-history-ui-that-filters-by-mode-apa-practice-accepting-gifts-straight-shot-and-shows-a-compact-summary-card-per-game-date-players-final-result-summary",
      "title": "Add a Match History UI that filters by mode (APA Practice / Accepting Gifts / Straight Shot) and shows a compact summary card per game (date, players, final result/summary).",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-apply-a-cohesive-visual-theme-and-component-styling-across-the-app-typography-spacing-button-styles-cards-and-headers-suitable-for-a-pool-practice-utility-avoid-a-blue-purple-primary-palette-unless-explicitly-requested-later",
      "title": "Apply a cohesive visual theme and component styling across the app (typography, spacing, button styles, cards, and headers) suitable for a pool practice utility; avoid a blue/purple primary palette unless explicitly requested later.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-straight-shot-mode-copy-and-naming-so-it-does-not-imply-the-game-is-straight-pool-ensure-all-user-facing-text-refers-to-it-as-a-stroke-counting-drill-and-describes-the-correct-drill-rules-in-english",
      "title": "Update the Straight Shot mode copy and naming so it does not imply the game is \"straight pool\"; ensure all user-facing text refers to it as a stroke-counting drill and describes the correct drill rules in English.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-straight-shot-strokes-drill-rule-tracking-in-the-active-straight-shot-session-count-strokes-shots-apply-win-condition-of-20-strokes-shots-or-under-require-pocketing-all-balls-with-the-8-ball-last-rules-display-session-completion-apply-scratch-penalty-as-2-shots-and-ensure-the-break-shot-does-not-count-as-a-shot-explicitly-handle-and-document-the-scratch-on-break-case-per-the-user-note",
      "title": "Implement Straight Shot (strokes drill) rule tracking in the active Straight Shot session: count strokes/shots, apply win condition of 20 strokes/shots or under, require pocketing all balls with the 8-ball last (rules display + session completion), apply scratch penalty as +2 shots, and ensure the break shot does not count as a shot; explicitly handle and document the \"scratch on break\" case per the user note.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-update-persisted-straight-shot-match-data-builder-saved-match-payload-so-straight-shot-history-reflects-stroke-based-tracking-including-scratch-impact-instead-of-the-current-attempts-makes-accuracy-model",
      "title": "Update persisted Straight Shot match data (builder + saved match payload) so Straight Shot history reflects stroke-based tracking (including scratch impact) instead of the current attempts/makes accuracy model.",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-add-moving-average-tracking-and-display-for-the-straight-shot-strokes-drill-based-on-saved-straight-shot-match-history-for-the-signed-in-user",
      "title": "Add moving average tracking and display for the Straight Shot strokes drill based on saved Straight Shot match history for the signed-in user.",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-investigate-and-fix-the-regression-where-a-previously-authenticated-user-is-unexpectedly-logged-out-or-forced-to-re-authenticate-after-an-app-update-reload-so-that-internet-identity-sessions-persist-as-expected-across-page-reloads-and-routine-redeploys-until-the-delegation-expires-or-the-user-explicitly-logs-out",
      "title": "Investigate and fix the regression where a previously authenticated user is unexpectedly logged out (or forced to re-authenticate) after an app update/reload, so that Internet Identity sessions persist as expected across page reloads and routine redeploys (until the delegation expires or the user explicitly logs out).",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-remove-all-apa-practice-ui-logic-that-treats-apa-as-a-race-to-x-format-and-update-the-apa-practice-start-and-game-screens-to-be-apa-9-ball-equalizer-point-based-tracking-points-to-win-by-skill-level-rather-than-a-rack-race",
      "title": "Remove all APA Practice UI/logic that treats APA as a 'race to X' format, and update the APA Practice start and game screens to be APA 9-ball Equalizer point-based tracking (points-to-win by skill level) rather than a rack race.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-apa-9-ball-rack-by-rack-scoring-capture-in-the-apa-practice-flow-including-10-total-points-per-rack-1-8-1-point-each-9-ball-2-points-dead-balls-tracked-as-0-points-and-defensive-shots-tracking-in-a-way-that-mirrors-core-apa-scorekeeper-behaviors-for-practice-use",
      "title": "Implement APA 9-ball rack-by-rack scoring capture in the APA Practice flow, including: 10 total points per rack (1–8 = 1 point each, 9-ball = 2 points), dead balls tracked as 0 points, and defensive shots tracking, in a way that mirrors core APA scorekeeper behaviors for practice use.",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-at-the-end-of-an-apa-9-ball-practice-match-calculate-and-display-apa-20-point-match-result-conversion-winner-12-20-loser-0-8-using-the-user-provided-sl-specific-chart-thresholds-based-on-the-losing-player-s-ball-points-earned-relative-to-their-sl-goal",
      "title": "At the end of an APA 9-ball practice match, calculate and display APA 20-point match result conversion (winner 12–20 / loser 0–8) using the user-provided SL-specific chart thresholds based on the losing player’s ball points earned relative to their SL goal.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-update-persisted-match-data-structures-so-apa-practice-saved-matches-store-the-new-apa-9-ball-equalizer-fields-skill-levels-points-to-win-targets-per-rack-scoring-with-dead-balls-defensive-shots-innings-ppi-and-match-point-conversion-outcome-and-ensure-match-history-and-match-details-render-a-correct-apa-9-ball-summary-for-these-matches",
      "title": "Update persisted match data structures so APA Practice saved matches store the new APA 9-ball Equalizer fields (skill levels, points-to-win targets, per-rack scoring with dead balls, defensive shots, innings/PPI, and match-point conversion outcome) and ensure Match History and Match Details render a correct APA 9-ball summary for these matches.",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-update-any-app-branding-elements-that-incorrectly-imply-8-ball-for-an-apa-9-ball-focused-scorekeeper-e-g-the-8-badge-in-the-header-login-card-while-keeping-all-user-facing-text-in-english",
      "title": "Update any app branding elements that incorrectly imply 8-ball for an APA 9-ball-focused scorekeeper (e.g., the '8' badge in the header/login card), while keeping all user-facing text in English.",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-replace-the-current-apa-rack-scoring-entry-ui-numeric-inputs-for-points-innings-with-a-seamless-per-inning-gui-for-apa-9-ball-practice-matches-show-balls-1-9-for-the-current-rack-allow-the-scorekeeper-to-tap-select-which-balls-were-pocketed-during-the-current-inning-and-provide-a-clear-turn-over-control-to-advance-to-the-next-player-s-inning",
      "title": "Replace the current APA rack scoring entry UI (numeric inputs for points/innings) with a seamless per-inning GUI for APA 9-ball practice matches: show balls 1–9 for the current rack, allow the scorekeeper to tap/select which balls were pocketed during the current inning, and provide a clear \"Turn Over\" control to advance to the next player's inning.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-automatic-innings-tracking-for-apa-practice-gameplay-based-on-the-per-inning-flow-innings-should-be-incremented-automatically-as-the-scorekeeper-uses-the-turn-over-workflow-no-manual-innings-numeric-input-fields",
      "title": "Implement automatic innings tracking for APA Practice gameplay based on the per-inning flow: innings should be incremented automatically as the scorekeeper uses the \"Turn Over\" workflow (no manual innings numeric input fields).",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-add-in-flow-controls-to-mark-dead-balls-and-defensive-shots-during-apa-per-inning-entry-without-breaking-the-existing-per-rack-10-point-accounting-and-defensive-shot-totals",
      "title": "Add in-flow controls to mark dead balls and defensive shots during APA per-inning entry, without breaking the existing per-rack 10-point accounting and defensive-shot totals.",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-apa-practice-game-flow-to-compute-and-submit-the-existing-per-rack-summary-data-playera-playerb-points-dead-balls-innings-defensive-shots-from-the-new-per-inning-ball-based-ui-keeping-the-saved-match-record-shape-and-match-history-details-rendering-compatible-with-existing-apa-match-persistence",
      "title": "Update the APA Practice game flow to compute and submit the existing per-rack summary data (playerA/playerB points, dead balls, innings, defensive shots) from the new per-inning ball-based UI, keeping the saved match record shape and Match History/Details rendering compatible with existing APA match persistence.",
      "reqIds": [
        "REQ-21"
      ],
      "version": 1
    },
    {
      "id": "feature-update-accepting-gifts-session-setup-to-support-a-configurable-starting-object-ball-count-defaulting-to-3-object-balls-plus-the-8-and-persist-this-setting-in-the-in-progress-session-state",
      "title": "Update Accepting Gifts session setup to support a configurable starting object-ball count, defaulting to 3 object balls (plus the 8), and persist this setting in the in-progress session state.",
      "reqIds": [
        "REQ-22"
      ],
      "version": 1
    },
    {
      "id": "feature-replace-the-accepting-gifts-rules-ui-copy-with-an-english-rules-description-that-matches-the-user-provided-rules-including-play-with-1-7-object-balls-of-one-group-plus-the-8-break-then-take-ball-in-hand-balls-made-on-break-are-spotted-reset-on-spots-goal-is-to-run-out-in-one-attempt-scoring-as-a-race-to-7-points-vs-a-ghost-next-set-increases-decreases-object-balls-based-on-set-win-loss-note-the-optional-blocking-ball-progression-after-winning-with-7-object-balls",
      "title": "Replace the Accepting Gifts rules UI copy with an English rules description that matches the user-provided rules, including: play with 1–7 object balls of one group plus the 8; break then take ball-in-hand; balls made on break are spotted (reset on spots); goal is to run out in one attempt; scoring as a race to 7 points vs a ghost; next set increases/decreases object balls based on set win/loss; note the optional blocking-ball progression after winning with 7 object balls.",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-accepting-gifts-gameplay-tracking-according-to-the-provided-ghost-opponent-set-rules-track-current-set-score-player-points-vs-ghost-points-to-7-represent-each-run-out-as-an-attempt-with-a-success-fail-outcome-award-1-point-to-the-player-on-success-or-to-the-ghost-on-failure-end-the-set-when-either-reaches-7-after-set-end-automatically-prepare-the-next-set-with-starting-object-balls-adjusted-1-on-set-win-1-on-set-loss-clamped-to-1-7-start-each-new-attempt-with-ball-in-hand-represented-in-ui-as-a-new-attempt",
      "title": "Implement Accepting Gifts gameplay tracking according to the provided “ghost opponent” set rules: track current set score (player points vs ghost points) to 7; represent each run-out as an attempt with a success/fail outcome; award 1 point to the player on success or to the ghost on failure; end the set when either reaches 7; after set end, automatically prepare the next set with starting object balls adjusted (+1 on set win, −1 on set loss), clamped to 1–7; start each new attempt with ball-in-hand (represented in UI as a new attempt).",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    },
    {
      "id": "feature-extend-accepting-gifts-saved-match-data-to-include-the-new-rule-tracking-fields-at-minimum-starting-object-ball-count-ending-object-ball-count-or-current-count-at-session-end-total-attempts-number-of-sets-completed-and-final-set-score-player-vs-ghost-and-save-these-fields-when-ending-the-session",
      "title": "Extend Accepting Gifts saved match data to include the new rule-tracking fields (at minimum: starting object-ball count, ending object-ball count or current count at session end, total attempts, number of sets completed, and final set score Player vs Ghost) and save these fields when ending the session.",
      "reqIds": [
        "REQ-25"
      ],
      "version": 1
    },
    {
      "id": "feature-update-match-history-summary-cards-and-match-details-rendering-for-accepting-gifts-to-show-the-new-key-summary-information-starting-object-balls-sets-completed-final-player-vs-ghost-score-attempts-in-english-while-keeping-existing-display-for-older-matches-that-lack-these-fields",
      "title": "Update Match History summary cards and Match Details rendering for Accepting Gifts to show the new key summary information (starting object balls, sets completed, final Player vs Ghost score, attempts) in English, while keeping existing display for older matches that lack these fields.",
      "reqIds": [
        "REQ-26"
      ],
      "version": 1
    },
    {
      "id": "feature-in-apa-9-ball-practice-rack-scoring-if-the-9-ball-is-recorded-as-pocketed-by-either-player-before-the-rack-is-otherwise-accounted-for-automatically-mark-all-remaining-unscored-balls-as-dead-so-that-the-rack-totals-reach-10-points-without-manual-dead-ball-entry",
      "title": "In APA 9-ball practice rack scoring, if the 9-ball is recorded as pocketed (by either player) before the rack is otherwise accounted for, automatically mark all remaining unscored balls as dead so that the rack totals reach 10 points without manual dead-ball entry.",
      "reqIds": [
        "REQ-27"
      ],
      "version": 1
    },
    {
      "id": "feature-persist-the-accepting-gifts-drill-progression-per-user-so-the-current-object-ball-count-and-optionally-the-in-progress-session-state-is-saved-server-side-and-automatically-restored-after-logout-login-page-reloads-or-starting-a-new-accepting-gifts-session",
      "title": "Persist the Accepting Gifts drill progression per user so the current object-ball count (and optionally the in-progress session state) is saved server-side and automatically restored after logout/login, page reloads, or starting a new Accepting Gifts session.",
      "reqIds": [
        "REQ-28"
      ],
      "version": 1
    },
    {
      "id": "feature-enforce-a-minimum-object-ball-count-of-2-not-1-for-accepting-gifts-progression-and-inputs-and-update-all-related-ui-copy-to-reflect-the-2-7-range-in-english",
      "title": "Enforce a minimum object-ball count of 2 (not 1) for Accepting Gifts progression and inputs, and update all related UI copy to reflect the 2–7 range in English.",
      "reqIds": [
        "REQ-29"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-user-controlled-reset-override-mechanism-for-accepting-gifts-so-the-user-can-explicitly-set-the-starting-current-object-ball-count-2-7-and-have-that-choice-persisted-as-the-new-carry-forward-baseline",
      "title": "Add a user-controlled reset/override mechanism for Accepting Gifts so the user can explicitly set the starting/current object-ball count (2–7) and have that choice persisted as the new carry-forward baseline.",
      "reqIds": [
        "REQ-30"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-backend-api-support-for-accepting-gifts-carry-forward-state-and-in-progress-session-storage-tied-to-the-authenticated-principal-and-wire-it-into-the-existing-react-query-data-layer",
      "title": "Implement backend API support for Accepting Gifts carry-forward state and in-progress session storage tied to the authenticated principal, and wire it into the existing React Query data layer.",
      "reqIds": [
        "REQ-31"
      ],
      "version": 1
    },
    {
      "id": "feature-update-apa-9-ball-rack-scoring-so-that-once-the-9-ball-is-recorded-as-pocketed-by-either-player-the-rack-is-treated-as-over-automatically-mark-all-remaining-unscored-balls-1-8-as-dead-and-prevent-any-further-ball-scoring-dead-ball-changes-for-that-rack-except-allowing-the-user-to-undo-unmark-the-9-ball-to-correct-mistakes",
      "title": "Update APA 9-ball rack scoring so that once the 9-ball is recorded as pocketed by either player, the rack is treated as over: automatically mark all remaining unscored balls (1–8) as dead, and prevent any further ball scoring/dead-ball changes for that rack except allowing the user to undo/unmark the 9-ball to correct mistakes.",
      "reqIds": [
        "REQ-32"
      ],
      "version": 1
    },
    {
      "id": "feature-auto-remember-and-auto-fill-the-signed-in-user-s-primary-player-name-from-the-existing-caller-user-profile-when-starting-new-matches-so-the-user-does-not-need-to-retype-their-name-each-time",
      "title": "Auto-remember and auto-fill the signed-in user’s primary player name (from the existing caller user profile) when starting new matches, so the user does not need to retype their name each time.",
      "reqIds": [
        "REQ-33"
      ],
      "version": 1
    },
    {
      "id": "feature-provide-a-per-player-aggregate-stats-view-that-can-be-opened-for-any-player-name-that-appears-in-the-user-s-saved-matches-and-compute-the-stats-from-the-signed-in-user-s-match-history-data",
      "title": "Provide a per-player Aggregate Stats view that can be opened for any player name that appears in the user’s saved matches, and compute the stats from the signed-in user’s match history data.",
      "reqIds": [
        "REQ-34"
      ],
      "version": 1
    },
    {
      "id": "feature-on-the-aggregate-stats-page-add-apa-9-ball-charts-for-the-selected-player-1-ppi-by-match-with-a-rolling-line-for-best-10-of-last-20-with-the-user-specified-fallback-rules-and-2-match-by-match-results-plotted-with-the-same-rolling-line-overlaid",
      "title": "On the Aggregate Stats page, add APA 9-ball charts for the selected player: (1) PPI by match with a rolling line for “best 10 of last 20” (with the user-specified fallback rules), and (2) match-by-match results plotted with the same rolling line overlaid.",
      "reqIds": [
        "REQ-35"
      ],
      "version": 1
    },
    {
      "id": "feature-add-navigation-from-individual-match-details-to-the-per-player-aggregate-stats-page-for-each-listed-player-so-the-user-can-jump-from-an-individual-result-to-that-player-s-aggregate-graphs",
      "title": "Add navigation from individual match details to the per-player Aggregate Stats page for each listed player, so the user can jump from an individual result to that player’s aggregate graphs.",
      "reqIds": [
        "REQ-36"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-app-s-primary-player-concept-is-per-account-device-by-using-the-existing-internet-identity-caller-profile-as-the-source-of-truth-and-provide-an-easy-way-to-set-or-change-it-using-the-existing-profile-setup-flow",
      "title": "Ensure the app’s primary player concept is per account/device by using the existing Internet Identity caller profile as the source of truth, and provide an easy way to set or change it using the existing profile setup flow.",
      "reqIds": [
        "REQ-37"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-profile-setup-edit-profile-dialog-to-allow-viewing-and-editing-the-primary-player-s-apa-9-ball-skill-level-alongside-the-name-and-save-both-fields-to-the-user-profile-implement-this-in-frontend-src-components-auth-profilesetupdialog-tsx-by-adding-an-apa-skill-level-selector-using-the-existing-apa-skill-level-constants-utilities-from-frontend-src-lib-apa-apaequalizer-ts-user-facing-text-must-be-in-english-and-should-clearly-indicate-this-skill-level-is-used-as-the-default-for-apa-matches-e-g-label-like-apa-9-ball-skill-level-default",
      "title": "Update the Profile Setup / Edit Profile dialog to allow viewing and editing the primary player’s APA 9-ball skill level alongside the name, and save both fields to the user profile.\n\nImplement this in `frontend/src/components/auth/ProfileSetupDialog.tsx` by adding an APA skill level selector using the existing APA skill-level constants/utilities (from `frontend/src/lib/apa/apaEqualizer.ts`).\n\nUser-facing text must be in English and should clearly indicate this skill level is used as the default for APA matches (e.g., label like “APA 9-Ball Skill Level (Default)”).",
      "reqIds": [
        "REQ-39"
      ],
      "version": 1
    },
    {
      "id": "feature-auto-fill-the-saved-primary-player-apa-skill-level-when-starting-a-new-apa-practice-match-update-frontend-src-pages-apa-practicestartpage-tsx-so-that-when-the-signed-in-user-has-a-saved-profile-skill-level-the-apa-start-page-uses-it-as-the-default-selection-for-the-primary-player-instead-of-always-defaulting-to-sl-5-the-auto-fill-behavior-should-not-block-manual-overrides-if-the-user-changes-the-skill-level-in-the-start-form-it-must-respect-the-user-s-selection",
      "title": "Auto-fill the saved primary player APA skill level when starting a new APA practice match.\n\nUpdate `frontend/src/pages/apa/PracticeStartPage.tsx` so that when the signed-in user has a saved profile skill level, the APA start page uses it as the default selection for the primary player instead of always defaulting to SL 5.\n\nThe auto-fill behavior should not block manual overrides: if the user changes the skill level in the start form, it must respect the user’s selection.",
      "reqIds": [
        "REQ-40"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-apa-practice-start-page-so-the-signed-in-user-s-saved-apa-skill-level-auto-loads-into-whichever-player-slot-player-1-or-player-2-currently-matches-the-caller-s-saved-primary-player-name-case-insensitive-including-when-the-user-overwrites-edits-the-name-field-after-initial-entry",
      "title": "Update the APA Practice Start page so the signed-in user's saved APA skill level auto-loads into whichever player slot (Player 1 or Player 2) currently matches the caller's saved primary player name (case-insensitive), including when the user overwrites/edits the name field after initial entry.",
      "reqIds": [
        "REQ-41"
      ],
      "version": 1
    },
    {
      "id": "feature-add-validation-to-prevent-starting-an-apa-practice-match-when-player-1-and-player-2-names-are-the-same-person-case-insensitive-show-an-english-validation-message-and-keep-the-start-match-button-disabled-or-block-start-until-the-issue-is-corrected",
      "title": "Add validation to prevent starting an APA Practice match when Player 1 and Player 2 names are the same person (case-insensitive). Show an English validation message and keep the Start Match button disabled (or block start) until the issue is corrected.",
      "reqIds": [
        "REQ-42"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-apa-practice-start-page-skill-level-auto-load-logic-applies-symmetrically-to-both-slots-by-tracking-manual-override-state-per-slot-player-1-sl-touched-and-player-2-sl-touched-and-resetting-that-override-state-when-that-slot-s-name-changes",
      "title": "Ensure APA Practice Start page skill level auto-load logic applies symmetrically to both slots by tracking \"manual override\" state per slot (Player 1 SL touched and Player 2 SL touched), and resetting that override state when that slot's name changes.",
      "reqIds": [
        "REQ-43"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-an-invite-only-access-control-mode-for-the-app-using-an-allowlist-of-approved-internet-identity-principals-so-the-app-owner-can-approve-teammates-while-blocking-everyone-else-even-if-the-app-link-is-shared",
      "title": "Implement an invite-only access control mode for the app using an allowlist of approved Internet Identity principals, so the app owner can approve teammates while blocking everyone else even if the app link is shared.",
      "reqIds": [
        "REQ-44"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-owner-approval-ui-screen-where-the-app-owner-can-review-pending-access-requests-and-approve-or-reject-them-individually-plus-a-one-click-reject-all-pending-action",
      "title": "Add an Owner Approval UI screen where the app owner can review pending access requests and approve or reject them individually, plus a one-click \"Reject All Pending\" action.",
      "reqIds": [
        "REQ-46"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-authentication-gate-so-that-after-internet-identity-login-users-who-are-not-approved-while-invite-only-mode-is-enabled-see-a-clear-english-access-denied-experience-instead-of-generic-failures-and-the-owner-can-still-access-the-admin-approval-tools",
      "title": "Update the authentication gate so that after Internet Identity login, users who are not approved (while invite-only mode is enabled) see a clear English access-denied experience instead of generic failures, and the owner can still access the admin approval tools.",
      "reqIds": [
        "REQ-47"
      ],
      "version": 1
    },
    {
      "id": "feature-provide-an-owner-only-control-to-disable-invite-only-mode-later-switch-back-to-public-access-reflecting-the-user-s-intent-to-potentially-remove-the-approval-requirement-in-the-future",
      "title": "Provide an owner-only control to disable invite-only mode later (switch back to public access), reflecting the user’s intent to potentially remove the approval requirement in the future.",
      "reqIds": [
        "REQ-48"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-access-check-loading-deadlock-by-ensuring-the-frontend-can-always-determine-access-state-or-safely-bypass-it-in-public-mode-without-getting-stuck-on-checking-access",
      "title": "Fix the access-check loading deadlock by ensuring the frontend can always determine access state (or safely bypass it in public mode) without getting stuck on \"Checking access...\".",
      "reqIds": [
        "REQ-50"
      ],
      "version": 1
    },
    {
      "id": "feature-when-public-no-approval-mode-is-active-do-not-show-the-invite-only-access-not-allowed-experience-or-approval-request-cta-as-part-of-the-normal-login-flow",
      "title": "When public/no-approval mode is active, do not show the invite-only \"Access Not Allowed\" experience or approval-request CTA as part of the normal login flow.",
      "reqIds": [
        "REQ-52"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-4th-mode-tile-card-to-the-home-screen-mode-grid-that-navigates-to-a-new-placeholder-route-for-a-future-real-apa-match-logging-mode",
      "title": "Add a 4th mode tile/card to the Home screen mode grid that navigates to a new placeholder route for a future “real APA match logging” mode.",
      "reqIds": [
        "REQ-53"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-new-blank-placeholder-page-component-for-the-4th-mode-and-register-a-new-tanstack-router-route-for-it-in-the-app-router",
      "title": "Create a new blank placeholder page component for the 4th mode and register a new TanStack Router route for it in the app router.",
      "reqIds": [
        "REQ-54"
      ],
      "version": 1
    },
    {
      "id": "feature-replace-the-current-coming-soon-placeholder-content-on-frontend-src-pages-apa-realapamatchplaceholderpage-tsx-with-an-on-page-after-the-fact-match-logging-form-that-includes-the-following-fields-match-date-opponent-name-your-score-their-score-points-innings-defensive-shots-and-notes-all-user-facing-text-must-be-in-english",
      "title": "Replace the current \"Coming Soon\" placeholder content on `frontend/src/pages/apa/RealApaMatchPlaceholderPage.tsx` with an on-page, after-the-fact match logging form that includes the following fields: match date, opponent name, your score, their score, points, innings, defensive shots, and notes. All user-facing text must be in English.",
      "reqIds": [
        "REQ-55"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-local-in-component-state-handling-for-the-official-apa-match-log-form-fields-on-frontend-src-pages-apa-realapamatchplaceholderpage-tsx-so-the-user-can-type-values-and-see-them-preserved-while-staying-on-the-page-without-adding-any-backend-persistence-or-saving-yet",
      "title": "Implement local (in-component) state handling for the Official APA Match Log form fields on `frontend/src/pages/apa/RealApaMatchPlaceholderPage.tsx` so the user can type values and see them preserved while staying on the page, without adding any backend persistence or saving yet.",
      "reqIds": [
        "REQ-56"
      ],
      "version": 1
    },
    {
      "id": "feature-add-basic-client-side-validation-ux-for-the-official-apa-match-log-form-ensure-numeric-fields-accept-only-numeric-input-and-show-an-english-inline-validation-message-for-obviously-invalid-values-e-g-negative-numbers-validation-must-not-require-backend-calls",
      "title": "Add basic client-side validation UX for the Official APA Match Log form: ensure numeric fields accept only numeric input and show an English inline validation message for obviously invalid values (e.g., negative numbers). Validation must not require backend calls.",
      "reqIds": [
        "REQ-57"
      ],
      "version": 1
    },
    {
      "id": "feature-on-frontend-src-pages-apa-realapamatchplaceholderpage-tsx-add-a-prominent-placeholder-save-button-for-the-official-apa-match-log-form-without-implementing-any-backend-persistence-yet",
      "title": "On `frontend/src/pages/apa/RealApaMatchPlaceholderPage.tsx`, add a prominent placeholder \"Save\" button for the Official APA Match Log form, without implementing any backend persistence yet.",
      "reqIds": [
        "REQ-58"
      ],
      "version": 1
    },
    {
      "id": "feature-replace-the-placeholder-save-behavior-on-frontend-src-pages-apa-realapamatchplaceholderpage-tsx-so-that-clicking-save-match-persists-the-form-data-as-an-official-real-apa-match-log-using-the-existing-react-query-mutation-patterns",
      "title": "Replace the placeholder Save behavior on frontend/src/pages/apa/RealApaMatchPlaceholderPage.tsx so that clicking “Save Match” persists the form data as an Official/Real APA match log, using the existing React Query mutation patterns.",
      "reqIds": [
        "REQ-61"
      ],
      "version": 1
    },
    {
      "id": "feature-update-match-history-and-match-details-ui-to-recognize-and-correctly-render-the-new-official-real-apa-match-log-mode-including-labels-and-a-compact-summary",
      "title": "Update Match History and Match Details UI to recognize and correctly render the new Official/Real APA match log mode, including labels and a compact summary.",
      "reqIds": [
        "REQ-62"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-routing-navigation-remains-consistent-after-saving-an-official-real-apa-match-log-entry-so-users-can-find-it-in-history-and-open-its-details-reliably",
      "title": "Ensure routing/navigation remains consistent after saving an Official/Real APA match log entry so users can find it in history and open its details reliably.",
      "reqIds": [
        "REQ-63"
      ],
      "version": 1
    },
    {
      "id": "feature-wire-the-official-apa-match-log-page-frontend-src-pages-apa-realapamatchplaceholderpage-tsx-save-button-to-persist-the-current-form-inputs-via-the-existing-react-query-save-mutation-usesavematch-by-constructing-a-matchlogrecord-for-the-official-real-apa-match-log-type-and-submitting-it-to-the-backend",
      "title": "Wire the Official APA Match Log page (`frontend/src/pages/apa/RealApaMatchPlaceholderPage.tsx`) Save button to persist the current form inputs via the existing React Query save mutation (`useSaveMatch`) by constructing a MatchLogRecord for the Official/Real APA match log type and submitting it to the backend.",
      "reqIds": [
        "REQ-65"
      ],
      "version": 1
    },
    {
      "id": "feature-update-match-history-and-match-details-ui-to-recognize-and-render-official-real-apa-match-log-entries-saved-from-the-official-apa-match-log-form-showing-a-compact-english-summary-in-history-and-the-full-set-of-saved-fields-in-details",
      "title": "Update Match History and Match Details UI to recognize and render Official/Real APA match log entries saved from the Official APA Match Log form, showing a compact English summary in history and the full set of saved fields in details.",
      "reqIds": [
        "REQ-66"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-official-apa-match-log-form-on-frontend-src-pages-apa-realapamatchplaceholderpage-tsx-to-collect-both-players-apa-9-ball-skill-levels-your-skill-level-and-opponent-skill-level-using-an-explicit-control-e-g-a-dropdown-select-with-values-1-9-with-all-user-facing-text-in-english",
      "title": "Update the Official APA Match Log form on `frontend/src/pages/apa/RealApaMatchPlaceholderPage.tsx` to collect both players’ APA 9-Ball skill levels (your skill level and opponent skill level) using an explicit control (e.g., a dropdown/select) with values 1–9, with all user-facing text in English.",
      "reqIds": [
        "REQ-67"
      ],
      "version": 1
    },
    {
      "id": "feature-on-the-official-apa-match-log-form-dynamically-compute-and-display-each-player-s-apa-points-to-win-target-out-of-value-based-on-the-selected-skill-level-using-the-existing-apa-equalizer-mapping-in-frontend-src-lib-apa-apaequalizer-ts-e-g-getpointstowin-update-the-score-ui-so-it-is-clear-that-each-entered-score-is-out-of-the-computed-target-e-g-label-inline-helper-like-your-score-out-of-38-and-their-score-out-of-31",
      "title": "On the Official APA Match Log form, dynamically compute and display each player’s APA points-to-win target (“out of” value) based on the selected skill level using the existing APA Equalizer mapping in `frontend/src/lib/apa/apaEqualizer.ts` (e.g., `getPointsToWin`). Update the score UI so it is clear that each entered score is “out of” the computed target (e.g., label/inline helper like “Your Score (out of 38)” and “Their Score (out of 31)”).",
      "reqIds": [
        "REQ-68"
      ],
      "version": 1
    },
    {
      "id": "feature-extend-persistence-for-the-official-real-apa-match-log-so-the-saved-match-record-includes-both-players-apa-skill-levels-this-must-include-1-updating-the-frontend-match-builder-buildofficialapamatchlog-in-frontend-src-lib-matches-matchbuilders-ts-to-include-the-new-fields-in-the-officialapamatchlog-payload-2-updating-motoko-types-in-backend-main-mo-so-officialapamatchlog-stores-the-two-skill-levels-and-3-updating-the-backend-apimatch-officialapamatchlogdata-projection-to-return-these-fields-to-the-frontend",
      "title": "Extend persistence for the Official/Real APA Match Log so the saved match record includes both players’ APA skill levels. This must include: (1) updating the frontend match builder `buildOfficialApaMatchLog` in `frontend/src/lib/matches/matchBuilders.ts` to include the new fields in the `officialApaMatchLog` payload; (2) updating Motoko types in `backend/main.mo` so `OfficialApaMatchLog` stores the two skill levels; and (3) updating the backend `ApiMatch.officialApaMatchLogData` projection to return these fields to the frontend.",
      "reqIds": [
        "REQ-69"
      ],
      "version": 1
    },
    {
      "id": "feature-update-official-apa-match-log-rendering-in-history-and-details-views-to-display-the-saved-skill-levels-and-their-computed-out-of-targets-in-english-without-breaking-display-for-older-entries-that-do-not-have-these-fields-this-includes-updating-summary-formatting-in-frontend-src-components-matches-matchsummarycard-tsx-and-detail-rendering-in-frontend-src-pages-history-matchdetailspage-tsx-or-shared-helpers-they-use",
      "title": "Update Official APA Match Log rendering in history and details views to display the saved skill levels and their computed “out of” targets in English, without breaking display for older entries that do not have these fields. This includes updating summary formatting in `frontend/src/components/matches/MatchSummaryCard.tsx` and detail rendering in `frontend/src/pages/history/MatchDetailsPage.tsx` (or shared helpers they use).",
      "reqIds": [
        "REQ-70"
      ],
      "version": 1
    },
    {
      "id": "feature-add-client-side-validation-on-the-official-apa-match-log-form-to-prevent-obviously-invalid-score-entries-relative-to-the-skill-level-based-out-of-targets-e-g-entered-score-greater-than-the-computed-target-validation-messaging-must-be-in-english-and-must-not-require-backend-calls",
      "title": "Add client-side validation on the Official APA Match Log form to prevent obviously invalid score entries relative to the skill-level-based “out of” targets (e.g., entered score greater than the computed target). Validation messaging must be in English and must not require backend calls.",
      "reqIds": [
        "REQ-71"
      ],
      "version": 1
    },
    {
      "id": "feature-compute-an-official-real-apa-match-win-outcome-using-the-saved-skill-level-based-apa-points-to-win-targets-so-the-app-can-determine-whether-the-user-won-the-logged-match-definition-use-player1skilllevel-your-sl-and-player2skilllevel-opponent-sl-to-compute-each-player-s-points-to-win-target-using-the-same-equalizer-mapping-already-used-in-the-ui-getpointstowin-concept-parse-myscore-and-theirscore-as-non-negative-integers-determine-outcome-didwin-true-if-myscore-mytarget-and-theirscore-theirtarget-didwin-false-if-theirscore-theirtarget-and-myscore-mytarget-didwin-null-unknown-if-skill-levels-are-missing-scores-are-missing-non-numeric-or-both-players-meet-exceed-their-target-ambiguous-or-neither-meets-exceeds-their-target-incomplete-apply-this-outcome-consistently-anywhere-official-apa-match-logs-are-displayed-or-used-for-stats",
      "title": "Compute an Official/Real APA match win outcome using the saved skill-level-based APA points-to-win targets, so the app can determine whether the user won the logged match.\n\nDefinition:\n- Use `player1SkillLevel` (your SL) and `player2SkillLevel` (opponent SL) to compute each player’s points-to-win target using the same Equalizer mapping already used in the UI (`getPointsToWin` concept).\n- Parse `myScore` and `theirScore` as non-negative integers.\n- Determine outcome:\n  - `didWin = true` if `myScore >= myTarget` and `theirScore < theirTarget`\n  - `didWin = false` if `theirScore >= theirTarget` and `myScore < myTarget`\n  - `didWin = null/unknown` if skill levels are missing, scores are missing/non-numeric, or both players meet/exceed their target (ambiguous) or neither meets/exceeds their target (incomplete).\n\nApply this outcome consistently anywhere Official APA match logs are displayed or used for stats.",
      "reqIds": [
        "REQ-72"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-official-apa-match-log-form-save-flow-to-validate-and-supply-a-win-outcome-or-explicitly-unknown-at-save-time-frontend-changes-in-frontend-src-pages-apa-realapamatchplaceholderpage-tsx-when-the-user-clicks-save-match-compute-didwin-using-the-same-rules-as-req-72-add-client-side-validation-messaging-english-to-prevent-saving-when-the-match-is-ambiguous-e-g-both-players-meet-exceed-their-target-or-clearly-incomplete-neither-meets-exceeds-target-when-both-skill-levels-are-selected-and-both-scores-are-present-example-message-unable-to-determine-a-winner-please-verify-scores-and-skill-levels-update-buildofficialapamatchlog-in-frontend-src-lib-matches-matchbuilders-ts-to-include-the-new-optional-didwin-field-in-the-officialapamatchlog-payload-submitted-to-the-backend-do-not-require-skill-levels-if-skill-levels-are-missing-allow-saving-but-didwin-must-remain-unknown",
      "title": "Update the Official APA Match Log form save flow to validate and supply a win outcome (or explicitly unknown) at save time.\n\nFrontend changes:\n- In `frontend/src/pages/apa/RealApaMatchPlaceholderPage.tsx`, when the user clicks “Save Match”, compute `didWin` using the same rules as REQ-72.\n- Add client-side validation messaging (English) to prevent saving when the match is ambiguous (e.g., both players meet/exceed their target) or clearly incomplete (neither meets/exceeds target) **when** both skill levels are selected and both scores are present.\n  - Example message: \"Unable to determine a winner. Please verify scores and skill levels.\"\n- Update `buildOfficialApaMatchLog` in `frontend/src/lib/matches/matchBuilders.ts` to include the new optional `didWin` field in the `officialApaMatchLog` payload submitted to the backend.\n- Do not require skill levels; if skill levels are missing, allow saving, but `didWin` must remain unknown.",
      "reqIds": [
        "REQ-74"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-per-player-aggregate-stats-win-percentage-to-include-official-real-apa-match-logs-when-a-win-outcome-is-known-frontend-changes-extend-frontend-src-lib-apa-apaaggregatestats-ts-with-a-new-extractor-for-official-apa-match-logs-for-the-selected-player-name-the-caller-you-using-apimatch-officialapamatchlogdata-didwin-when-present-update-frontend-src-pages-players-playeraggregatestatspage-tsx-so-total-matches-and-wins-used-for-win-rate-include-apa-practice-matches-existing-behavior-plus-official-apa-match-logs-where-didwin-is-known-official-logs-with-unknown-outcome-do-not-affect-the-win-rate-denominator-ensure-all-user-facing-text-remains-in-english",
      "title": "Update the per-player Aggregate Stats win percentage to include Official/Real APA match logs when a win outcome is known.\n\nFrontend changes:\n- Extend `frontend/src/lib/apa/apaAggregateStats.ts` with a new extractor for Official APA match logs for the selected player name (the caller / \"you\"), using `ApiMatch.officialApaMatchLogData.didWin` when present.\n- Update `frontend/src/pages/players/PlayerAggregateStatsPage.tsx` so:\n  - Total matches and wins used for win-rate include:\n    - APA Practice matches (existing behavior), plus\n    - Official APA match logs where `didWin` is known.\n  - Official logs with unknown outcome do not affect the win-rate denominator.\n- Ensure all user-facing text remains in English.",
      "reqIds": [
        "REQ-75"
      ],
      "version": 1
    },
    {
      "id": "feature-add-display-of-the-derived-official-apa-match-log-outcome-in-history-summary-and-match-details-when-available-frontend-changes-update-frontend-src-components-matches-matchsummarycard-tsx-to-append-a-compact-outcome-indicator-for-official-apa-match-logs-when-officialapamatchlogdata-didwin-is-present-english-text-such-as-win-loss-update-official-apa-match-log-detail-rendering-in-frontend-src-pages-history-matchdetailspage-tsx-or-its-shared-helpers-to-show-the-computed-outcome-when-available-and-omit-it-when-unknown",
      "title": "Add display of the derived Official APA match log outcome in history summary and match details when available.\n\nFrontend changes:\n- Update `frontend/src/components/matches/MatchSummaryCard.tsx` to append a compact outcome indicator for Official APA match logs when `officialApaMatchLogData.didWin` is present (English text such as \"• Win\" / \"• Loss\").\n- Update Official APA match log detail rendering in `frontend/src/pages/history/MatchDetailsPage.tsx` (or its shared helpers) to show the computed outcome when available, and omit it when unknown.",
      "reqIds": [
        "REQ-76"
      ],
      "version": 1
    },
    {
      "id": "feature-remove-the-points-numeric-input-from-the-official-real-apa-match-log-form-on-frontend-src-pages-apa-realapamatchplaceholderpage-tsx-and-stop-collecting-sending-it-when-saving-an-official-match-log",
      "title": "Remove the “Points” numeric input from the Official/Real APA Match Log form on `frontend/src/pages/apa/RealApaMatchPlaceholderPage.tsx` and stop collecting/sending it when saving an official match log.",
      "reqIds": [
        "REQ-78"
      ],
      "version": 1
    },
    {
      "id": "feature-update-official-real-apa-match-log-persistence-to-remove-the-points-field-end-to-end-update-the-frontend-match-builder-buildofficialapamatchlog-in-frontend-src-lib-matches-matchbuilders-ts-and-the-backend-motoko-types-projections-in-backend-main-mo-so-official-apa-match-logs-no-longer-store-or-return-a-points-value",
      "title": "Update Official/Real APA Match Log persistence to remove the `points` field end-to-end: update the frontend match builder `buildOfficialApaMatchLog` in `frontend/src/lib/matches/matchBuilders.ts` and the backend Motoko types/projections in `backend/main.mo` so Official APA match logs no longer store or return a `points` value.",
      "reqIds": [
        "REQ-79"
      ],
      "version": 1
    },
    {
      "id": "feature-change-official-real-apa-match-log-ppi-calculation-everywhere-it-is-displayed-used-for-stats-to-myscore-innings-defensiveshots-scores-innings-defensive-shots-parsed-as-non-negative-integers-if-the-denominator-is-0-or-parsing-fails-treat-ppi-as-unavailable-and-display-a-clear-english-fallback-e-g-ppi",
      "title": "Change Official/Real APA Match Log PPI calculation everywhere it is displayed/used for stats to: `myScore ÷ (innings − defensiveShots)` (scores/innings/defensive shots parsed as non-negative integers). If the denominator is <= 0 or parsing fails, treat PPI as unavailable and display a clear English fallback (e.g., “PPI: —”).",
      "reqIds": [
        "REQ-81"
      ],
      "version": 1
    },
    {
      "id": "feature-update-official-real-apa-match-log-rendering-in-match-history-summary-cards-to-include-the-out-of-points-to-win-context-based-on-saved-skill-levels-alongside-the-displayed-scores-whenever-both-skill-levels-are-present",
      "title": "Update Official/Real APA match log rendering in Match History summary cards to include the “out of” points-to-win context (based on saved skill levels) alongside the displayed scores whenever both skill levels are present.",
      "reqIds": [
        "REQ-83"
      ],
      "version": 1
    },
    {
      "id": "feature-update-official-real-apa-match-log-rendering-in-match-details-to-display-each-player-s-score-with-the-out-of-points-to-win-target-when-skill-levels-are-present-rather-than-only-showing-the-raw-score",
      "title": "Update Official/Real APA match log rendering in Match Details to display each player’s score with the “out of” points-to-win target when skill levels are present, rather than only showing the raw score.",
      "reqIds": [
        "REQ-84"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-edit-flow-for-previously-saved-official-real-apa-match-log-entries-so-a-user-can-update-fields-at-minimum-the-match-date-after-saving",
      "title": "Add an edit flow for previously saved Official/Real APA match log entries so a user can update fields (at minimum the match date) after saving.",
      "reqIds": [
        "REQ-85"
      ],
      "version": 1
    },
    {
      "id": "feature-register-a-dedicated-route-for-editing-an-existing-official-real-apa-match-log-entry-and-wire-navigation-to-it",
      "title": "Register a dedicated route for editing an existing Official/Real APA match log entry and wire navigation to it.",
      "reqIds": [
        "REQ-86"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-official-apa-match-log-form-page-to-support-both-create-and-edit-modes-create-uses-the-existing-save-behavior-edit-uses-the-existing-update-mutation-useupdatematch-and-preserves-the-matchid",
      "title": "Update the Official APA Match Log form page to support both create and edit modes: create uses the existing save behavior, edit uses the existing update mutation (`useUpdateMatch`) and preserves the matchId.",
      "reqIds": [
        "REQ-87"
      ],
      "version": 1
    },
    {
      "id": "feature-add-required-field-validation-for-saving-updating-official-real-apa-match-logs-so-the-user-cannot-save-unless-the-required-fields-are-filled-with-clear-english-messaging",
      "title": "Add required-field validation for saving/updating Official/Real APA match logs so the user cannot save unless the required fields are filled, with clear English messaging.",
      "reqIds": [
        "REQ-88"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-official-real-apa-match-log-create-edit-form-to-allow-innings-to-be-unknown-so-a-user-can-save-older-matches-even-when-innings-are-not-available",
      "title": "Update the Official/Real APA Match Log create/edit form to allow innings to be unknown, so a user can save older matches even when innings are not available.",
      "reqIds": [
        "REQ-90"
      ],
      "version": 1
    },
    {
      "id": "feature-when-innings-is-unknown-unparseable-for-an-official-real-apa-match-log-display-ppi-as-unavailable-for-that-match-and-avoid-attempting-to-compute-a-numeric-ppi-value",
      "title": "When innings is unknown/unparseable for an Official/Real APA match log, display PPI as unavailable (\"—\") for that match and avoid attempting to compute a numeric PPI value.",
      "reqIds": [
        "REQ-91"
      ],
      "version": 1
    },
    {
      "id": "feature-update-match-history-cards-to-display-the-match-s-actual-match-date-not-just-the-record-creation-timestamp-for-official-real-apa-match-logs-use-the-saved-officialapamatchlogdata-date-value-when-present-and-parseable-as-the-displayed-date-otherwise-fall-back-to-the-existing-match-datetime-timestamp-display-ensure-the-date-shown-on-each-match-summary-card-is-consistent-with-the-date-used-for-sorting-see-req-93",
      "title": "Update Match History cards to display the match’s actual match date (not just the record creation timestamp). For Official/Real APA match logs, use the saved `officialApaMatchLogData.date` value (when present and parseable) as the displayed date; otherwise fall back to the existing `match.dateTime` timestamp display. Ensure the date shown on each Match Summary Card is consistent with the date used for sorting (see REQ-93).",
      "reqIds": [
        "REQ-92"
      ],
      "version": 1
    },
    {
      "id": "feature-add-match-history-sorting-by-match-date-and-allow-the-user-to-change-the-sort-order-implement-a-sort-control-on-the-match-history-page-that-toggles-between-newest-first-and-oldest-first-and-apply-the-sort-to-the-currently-filtered-list-using-the-same-effective-match-date-logic-as-the-cards-official-real-apa-match-logs-sort-by-officialapamatchlogdata-date-when-present-parseable-otherwise-by-match-datetime-all-other-match-types-sort-by-match-datetime",
      "title": "Add match-history sorting by match date and allow the user to change the sort order. Implement a sort control on the Match History page that toggles between “Newest first” and “Oldest first”, and apply the sort to the currently filtered list using the same effective match-date logic as the cards: Official/Real APA match logs sort by `officialApaMatchLogData.date` when present/parseable, otherwise by `match.dateTime`; all other match types sort by `match.dateTime`.",
      "reqIds": [
        "REQ-93"
      ],
      "version": 1
    },
    {
      "id": "feature-stop-blocking-official-real-apa-match-log-saves-updates-solely-because-the-derived-outcome-is-unknown-update-frontend-src-components-apa-realapamatchform-tsx-so-clicking-save-match-update-match-does-not-show-an-error-and-abort-when-deriveofficialapaoutcome-returns-unknown-instead-allow-the-match-to-be-saved-with-an-unknown-outcome",
      "title": "Stop blocking Official/Real APA Match Log saves/updates solely because the derived outcome is unknown. Update `frontend/src/components/apa/RealApaMatchForm.tsx` so clicking “Save Match” / “Update Match” does not show an error and abort when `deriveOfficialApaOutcome(...)` returns `unknown`; instead allow the match to be saved with an unknown outcome.",
      "reqIds": [
        "REQ-94"
      ],
      "version": 1
    },
    {
      "id": "feature-persist-the-computed-win-loss-outcome-for-official-real-apa-match-logs-when-it-can-be-determined-update-frontend-src-components-apa-realapamatchform-tsx-and-frontend-src-lib-matches-matchbuilders-ts-so-that-when-deriveofficialapaoutcome-returns-win-or-loss-the-saved-matchlogrecord-officialapamatchlog-didwin-field-is-set-to-true-for-win-and-false-for-loss-when-the-outcome-is-unknown-keep-didwin-unset-undefined",
      "title": "Persist the computed win/loss outcome for Official/Real APA Match Logs when it can be determined. Update `frontend/src/components/apa/RealApaMatchForm.tsx` and `frontend/src/lib/matches/matchBuilders.ts` so that when `deriveOfficialApaOutcome(...)` returns `win` or `loss`, the saved `MatchLogRecord.officialApaMatchLog.didWin` field is set to `true` for win and `false` for loss; when the outcome is `unknown`, keep `didWin` unset/undefined.",
      "reqIds": [
        "REQ-95"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-official-real-apa-match-log-save-flow-so-clicking-save-match-on-the-official-apa-match-log-form-successfully-persists-the-match-via-the-existing-usesavematch-mutation-without-throwing-an-error-and-navigates-to-the-saved-match-s-details-page",
      "title": "Fix the Official/Real APA Match Log save flow so clicking “Save Match” on the Official APA Match Log form successfully persists the match via the existing `useSaveMatch` mutation without throwing an error, and navigates to the saved match’s details page.",
      "reqIds": [
        "REQ-96"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-match-history-page-so-the-sort-control-toggle-between-newest-first-and-oldest-first-is-visible-and-usable-whenever-there-are-matches-visible-in-the-list-and-does-not-disappear-incorrectly-when-the-user-is-viewing-a-non-empty-history-list",
      "title": "Fix the Match History page so the sort control (toggle between “Newest first” and “Oldest first”) is visible and usable whenever there are matches visible in the list, and does not disappear incorrectly when the user is viewing a non-empty history list.",
      "reqIds": [
        "REQ-98"
      ],
      "version": 1
    },
    {
      "id": "feature-investigate-and-fix-the-regression-where-the-user-can-no-longer-save-a-match-reproduce-the-failure-for-each-mode-that-supports-saving-apa-practice-straight-shot-accepting-gifts-and-official-real-apa-match-log-and-identify-whether-the-failure-is-caused-by-frontend-validation-disabled-actions-backend-traps-or-frontend-backend-type-mismatches",
      "title": "Investigate and fix the regression where the user can no longer save a match. Reproduce the failure for each mode that supports saving (APA Practice, Straight Shot, Accepting Gifts, and Official/Real APA Match Log) and identify whether the failure is caused by frontend validation/disabled actions, backend traps, or frontend-backend type mismatches.",
      "reqIds": [
        "REQ-99"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-any-frontend-backend-schema-type-mismatches-that-can-prevent-saving-or-listing-matches-especially-for-official-real-apa-match-logs-ensure-the-motoko-apimatch-officialapamatchlogdata-shape-matches-the-data-actually-stored-in-apadetailedofficial-and-what-the-frontend-sends-via-buildofficialapamatchlog-including-removal-of-any-stale-fields-such-as-points-if-they-are-no-longer-collected-sent",
      "title": "Fix any frontend-backend schema/type mismatches that can prevent saving or listing matches, especially for Official/Real APA Match Logs. Ensure the Motoko `ApiMatch.officialApaMatchLogData` shape matches the data actually stored in `APADetailedOfficial` and what the frontend sends via `buildOfficialApaMatchLog` (including removal of any stale fields such as `points` if they are no longer collected/sent).",
      "reqIds": [
        "REQ-100"
      ],
      "version": 1
    },
    {
      "id": "feature-harden-the-save-flows-so-that-the-user-is-not-blocked-from-saving-due-to-avoidable-client-side-state-issues-specifically-ensure-save-buttons-are-not-permanently-disabled-due-to-stale-actorfetching-isfetching-state-and-ensure-save-actions-fail-fast-with-a-clear-english-message-when-the-backend-actor-identity-is-not-ready",
      "title": "Harden the save flows so that the user is not blocked from saving due to avoidable client-side state issues. Specifically: ensure save buttons are not permanently disabled due to stale `actorFetching/isFetching` state, and ensure save actions fail fast with a clear English message when the backend actor/identity is not ready.",
      "reqIds": [
        "REQ-101"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-apa-practice-mode-so-the-match-stops-as-soon-as-a-player-reaches-or-exceeds-their-points-to-win-target-preventing-final-saved-displayed-scores-from-exceeding-the-target-e-g-showing-36-when-the-target-was-lower",
      "title": "Fix APA Practice mode so the match stops as soon as a player reaches (or exceeds) their points-to-win target, preventing final saved/displayed scores from exceeding the target (e.g., showing 36 when the target was lower).",
      "reqIds": [
        "REQ-103"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-apa-practice-mode-innings-tracking-so-innings-increment-correctly-per-player-turn-not-only-after-the-second-player-s-turn-resulting-in-separate-accurate-inning-counts-for-player-1-and-player-2-across-the-match",
      "title": "Fix APA Practice mode innings tracking so innings increment correctly per player turn (not only after the second player’s turn), resulting in separate, accurate inning counts for Player 1 and Player 2 across the match.",
      "reqIds": [
        "REQ-104"
      ],
      "version": 1
    },
    {
      "id": "feature-update-apa-practice-rack-scoring-completion-behavior-so-that-when-the-match-becomes-complete-in-the-middle-of-play-the-scoring-ui-is-safely-prevented-from-continuing-to-add-points-innings-beyond-match-completion-and-the-user-can-proceed-to-saving-the-match-without-inconsistent-state",
      "title": "Update APA Practice rack-scoring completion behavior so that when the match becomes complete in the middle of play, the scoring UI is safely prevented from continuing to add points/innings beyond match completion, and the user can proceed to saving the match without inconsistent state.",
      "reqIds": [
        "REQ-105"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-official-real-apa-match-log-date-parsing-formatting-so-the-date-displayed-on-match-history-summary-cards-matches-the-exact-match-date-the-user-entered-no-off-by-one-day-shift-due-to-timezone-parsing-update-frontend-src-lib-matches-effectivematchdate-ts-so-geteffectivematchtimestamp-and-formateffectivematchdate-treat-date-only-strings-notably-the-html-input-type-date-format-yyyy-mm-dd-as-a-local-calendar-date-rather-than-a-utc-timestamp-that-can-render-as-the-previous-day-in-some-timezones",
      "title": "Fix the Official/Real APA match log date parsing/formatting so the date displayed on Match History summary cards matches the exact match date the user entered (no off-by-one-day shift due to timezone parsing). Update `frontend/src/lib/matches/effectiveMatchDate.ts` so `getEffectiveMatchTimestamp(...)` and `formatEffectiveMatchDate(...)` treat date-only strings (notably the HTML `<input type=\"date\">` format `YYYY-MM-DD`) as a local calendar date rather than a UTC timestamp that can render as the previous day in some timezones.",
      "reqIds": [
        "REQ-106"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-official-real-apa-match-log-create-edit-form-so-the-save-update-button-is-not-permanently-disabled-showing-connecting-when-an-authenticated-user-is-trying-to-save-a-match-the-form-must-allow-saving-as-soon-as-a-usable-backend-actor-instance-exists-even-if-the-actor-hook-reports-a-background-fetching-refetching-state",
      "title": "Fix the Official/Real APA Match Log create/edit form so the Save/Update button is not permanently disabled showing “Connecting...” when an authenticated user is trying to save a match. The form must allow saving as soon as a usable backend actor instance exists, even if the actor hook reports a background fetching/refetching state.",
      "reqIds": [
        "REQ-107"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-clear-user-facing-error-path-on-the-official-real-apa-match-log-form-for-the-case-where-the-backend-actor-never-becomes-available-if-the-actor-is-still-unavailable-after-a-reasonable-wait-show-an-english-inline-message-and-provide-a-user-invokable-retry-action-e-g-a-retry-connection-button-without-requiring-a-full-page-refresh",
      "title": "Add a clear, user-facing error path on the Official/Real APA Match Log form for the case where the backend actor never becomes available. If the actor is still unavailable after a reasonable wait, show an English inline message and provide a user-invokable retry action (e.g., a “Retry connection” button) without requiring a full page refresh.",
      "reqIds": [
        "REQ-108"
      ],
      "version": 1
    },
    {
      "id": "feature-harden-the-official-real-apa-match-log-save-update-submission-flow-so-that-if-the-save-mutation-call-hangs-or-takes-unusually-long-the-user-receives-feedback-and-can-recover-implement-a-client-side-timeout-for-the-save-update-request-that-surfaces-a-clear-english-error-message-and-re-enables-the-save-update-button-so-the-user-can-retry",
      "title": "Harden the Official/Real APA Match Log save/update submission flow so that if the save mutation call hangs or takes unusually long, the user receives feedback and can recover. Implement a client-side timeout for the save/update request that surfaces a clear English error message and re-enables the Save/Update button so the user can retry.",
      "reqIds": [
        "REQ-109"
      ],
      "version": 1
    },
    {
      "id": "feature-verify-end-to-end-saving-of-official-real-apa-match-logs-succeeds-against-the-current-backend-schema-and-access-control-behavior-in-public-mode-and-add-any-necessary-backend-fixes-so-the-savematch-call-completes-and-does-not-trap-or-deadlock-for-authenticated-users-when-invite-only-mode-is-disabled",
      "title": "Verify end-to-end saving of Official/Real APA Match Logs succeeds against the current backend schema and access-control behavior in public mode, and add any necessary backend fixes so the `saveMatch` call completes and does not trap or deadlock for authenticated users when invite-only mode is disabled.",
      "reqIds": [
        "REQ-110"
      ],
      "version": 1
    },
    {
      "id": "feature-update-straight-shot-gameplay-ui-to-use-exactly-one-user-entered-input-total-number-of-shots-strokes-for-the-completed-run-remove-incremental-stroke-tracking-and-remove-all-gameplay-controls-fields-for-scratches-balls-made-and-8-ball-pocketed-state-the-straight-shot-game-page-must-show-a-single-numeric-input-non-negative-integer-labeled-in-english-e-g-total-shots-and-must-compute-display-the-result-as-win-when-the-entered-value-is-20-or-under-and-loss-when-over-20",
      "title": "Update Straight Shot gameplay UI to use exactly one user-entered input: total number of shots/strokes for the completed run. Remove incremental stroke tracking and remove all gameplay controls/fields for scratches, balls made, and 8-ball pocketed state. The Straight Shot game page must show a single numeric input (non-negative integer) labeled in English (e.g., \"Total Shots\"), and must compute/display the result as \"Win\" when the entered value is 20 or under and \"Loss\" when over 20.",
      "reqIds": [
        "REQ-111"
      ],
      "version": 1
    },
    {
      "id": "feature-update-straight-shot-session-start-flow-to-initialize-and-persist-only-the-minimal-state-needed-for-the-single-input-model-session-storage-state-under-sessionstorage-straightshotgame-must-no-longer-require-or-depend-on-fields-related-to-incremental-tracking-scratches-ballsmade-eightballpocketed-scratchonbreak",
      "title": "Update Straight Shot session start flow to initialize and persist only the minimal state needed for the single-input model. Session storage state under `sessionStorage['straightShotGame']` must no longer require or depend on fields related to incremental tracking (scratches, ballsMade, eightBallPocketed, scratchOnBreak).",
      "reqIds": [
        "REQ-112"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-straight-shot-save-behavior-so-saving-a-session-persists-the-single-entered-total-shots-value-without-relying-on-balls-made-tracking-or-incremental-stroke-logic-when-constructing-the-saved-match-record-via-buildstraightshotmatch-populate-the-saved-straight-shot-fields-consistently-from-the-single-input-e-g-strokes-should-contain-the-entered-total-as-the-primary-value-used-for-display-statistics-do-not-require-any-backend-schema-changes",
      "title": "Update the Straight Shot save behavior so saving a session persists the single entered total shots value without relying on balls-made tracking or incremental stroke logic. When constructing the saved match record via `buildStraightShotMatch`, populate the saved Straight Shot fields consistently from the single input (e.g., `strokes` should contain the entered total as the primary value used for display/statistics). Do not require any backend schema changes.",
      "reqIds": [
        "REQ-113"
      ],
      "version": 1
    },
    {
      "id": "feature-update-match-history-summary-rendering-and-match-details-rendering-for-straight-shot-to-reflect-the-single-input-model-history-cards-and-details-must-use-the-saved-total-shots-strokes-value-to-determine-and-display-win-loss-win-20-loss-20-remove-or-de-emphasize-straight-shot-fields-that-are-no-longer-collected-scratches-balls-made-per-shot-scoring-breakdown-from-the-ui-while-remaining-backward-compatible-for-older-saved-matches-that-still-include-those-fields",
      "title": "Update Match History summary rendering and Match Details rendering for Straight Shot to reflect the single-input model. History cards and details must use the saved total shots/strokes value to determine and display Win/Loss (Win <= 20, Loss > 20). Remove or de-emphasize Straight Shot fields that are no longer collected (scratches, balls made, per-shot scoring breakdown) from the UI, while remaining backward-compatible for older saved matches that still include those fields.",
      "reqIds": [
        "REQ-114"
      ],
      "version": 1
    },
    {
      "id": "feature-update-straight-shot-rules-copy-to-match-the-simplified-model-single-total-shots-input-recorded-after-the-run-is-completed-remove-references-to-incremental-shot-counting-ui-actions-normal-shot-button-scratch-button-scratch-on-break-special-handling-ball-made-and-8-ball-toggles-keep-the-english-win-condition-statement-20-or-under-is-a-win-over-20-is-a-loss",
      "title": "Update Straight Shot Rules copy to match the simplified model (single total-shots input recorded after the run is completed). Remove references to incremental shot counting UI actions (normal shot button, scratch button, scratch-on-break special handling, ball-made and 8-ball toggles). Keep the English win condition statement: \"20 or under is a win; over 20 is a loss.\"",
      "reqIds": [
        "REQ-115"
      ],
      "version": 1
    },
    {
      "id": "feature-update-straight-shot-moving-average-computation-display-on-the-straight-shot-start-page-to-use-the-saved-total-shots-strokes-value-from-match-history-consistent-with-the-single-input-model-the-moving-average-label-text-must-remain-in-english-and-reflect-the-same-unit-shots-strokes",
      "title": "Update Straight Shot moving average computation/display on the Straight Shot start page to use the saved total shots/strokes value from match history, consistent with the single-input model. The moving average label text must remain in English and reflect the same unit (shots/strokes).",
      "reqIds": [
        "REQ-116"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-apa-9-ball-practice-match-point-conversion-so-it-uses-the-loser-s-apa-skill-level-row-and-the-loser-s-total-balls-points-pocketed-to-choose-the-correct-20-point-match-score-outcome-per-the-uploaded-chart-images-image-6-png-and-image-7-png",
      "title": "Fix APA 9-Ball Practice match-point conversion so it uses the loser’s APA skill level row and the loser’s total balls/points pocketed to choose the correct 20-point match score outcome per the uploaded chart (images image-6.png and image-7.png).",
      "reqIds": [
        "REQ-117"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-apa-practice-match-builder-so-winner-loser-determination-and-points-needed-are-based-on-the-apa-equalizer-points-to-win-target-for-each-player-derived-from-skill-level-not-the-skill-level-value-itself-and-so-the-saved-match-data-reflects-correct-points-to-win-winner-flag-and-match-point-conversion-values",
      "title": "Fix the APA Practice match builder so winner/loser determination and “points needed” are based on the APA Equalizer points-to-win target for each player (derived from skill level), not the skill level value itself, and so the saved match data reflects correct points-to-win, winner flag, and match-point conversion values.",
      "reqIds": [
        "REQ-118"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-apa-9-ball-practice-match-completion-screen-so-the-save-match-return-to-history-button-does-not-get-stuck-showing-connecting-indefinitely-when-the-user-is-authenticated-and-the-match-is-complete",
      "title": "Fix the APA 9-Ball Practice match completion screen so the “Save Match & Return to History” button does not get stuck showing “Connecting...” indefinitely when the user is authenticated and the match is complete.",
      "reqIds": [
        "REQ-119"
      ],
      "version": 1
    },
    {
      "id": "feature-on-the-apa-practice-match-completion-screen-frontend-src-pages-apa-practicegamepage-tsx-add-a-clear-recovery-path-when-the-backend-actor-is-not-available-after-a-reasonable-wait-show-an-english-inline-message-and-provide-a-user-invokable-retry-connection-action-using-the-existing-retry-hook-frontend-src-hooks-useactorretry-ts",
      "title": "On the APA Practice match completion screen (`frontend/src/pages/apa/PracticeGamePage.tsx`), add a clear recovery path when the backend actor is not available: after a reasonable wait, show an English inline message and provide a user-invokable “Retry connection” action using the existing retry hook (`frontend/src/hooks/useActorRetry.ts`).",
      "reqIds": [
        "REQ-120"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-apa-practice-match-completion-save-flow-fails-fast-with-clear-english-errors-rather-than-appearing-stuck-if-the-user-clicks-save-while-the-backend-actor-is-not-ready-show-an-english-error-and-keep-the-ui-responsive-no-permanent-disabled-state",
      "title": "Ensure the APA Practice match completion Save flow fails fast with clear English errors rather than appearing stuck: if the user clicks save while the backend actor is not ready, show an English error and keep the UI responsive (no permanent disabled state).",
      "reqIds": [
        "REQ-121"
      ],
      "version": 1
    },
    {
      "id": "feature-re-run-the-deployment-of-the-current-application-build-and-verify-that-it-completes-successfully-after-the-prior-deployment-error-with-the-app-reachable-and-basic-functionality-intact",
      "title": "Re-run the deployment of the current application build and verify that it completes successfully after the prior deployment error, with the app reachable and basic functionality intact.",
      "reqIds": [
        "REQ-122"
      ],
      "version": 1
    },
    {
      "id": "feature-update-apa-9-ball-practice-rack-scoring-so-the-complete-rack-action-becomes-available-as-soon-as-the-current-rack-scoring-causes-either-player-to-reach-exceed-their-points-to-win-target-based-on-matchcontext-current-points-current-rack-points-even-if-the-9-ball-has-not-been-pocketed",
      "title": "Update APA 9-ball Practice rack scoring so the \"Complete Rack\" action becomes available as soon as the current rack scoring causes either player to reach/exceed their points-to-win target (based on matchContext current points + current rack points), even if the 9-ball has not been pocketed.",
      "reqIds": [
        "REQ-123"
      ],
      "version": 1
    },
    {
      "id": "feature-in-frontend-src-components-apa-aparackscoringpanel-tsx-when-match-completion-is-imminent-a-player-has-reached-exceeded-their-target-with-the-current-rack-scoring-automatically-mark-all-remaining-unscored-balls-in-the-rack-as-dead-so-that-the-rack-totals-reach-10-points-and-the-existing-complete-rack-button-becomes-enabled-support-reverting-these-auto-dead-markings-if-the-user-changes-scoring-such-that-match-completion-is-no-longer-imminent",
      "title": "In `frontend/src/components/apa/ApaRackScoringPanel.tsx`, when match completion is imminent (a player has reached/exceeded their target with the current rack scoring), automatically mark all remaining unscored balls in the rack as Dead so that the rack totals reach 10 points and the existing \"Complete Rack\" button becomes enabled; support reverting these auto-dead markings if the user changes scoring such that match completion is no longer imminent.",
      "reqIds": [
        "REQ-124"
      ],
      "version": 1
    },
    {
      "id": "feature-update-apa-9-ball-practice-innings-tracking-and-display-so-the-app-shows-exactly-one-shared-innings-value-one-innings-box-line-and-it-increments-only-after-player-2-ends-their-turn-i-e-after-the-turn-switches-from-player-2-back-to-player-1-remove-hide-any-per-player-innings-displays-in-apa-practice-gameplay-ui",
      "title": "Update APA 9-Ball Practice innings tracking and display so the app shows exactly one shared innings value (one innings box/line), and it increments only after Player 2 ends their turn (i.e., after the turn switches from Player 2 back to Player 1). Remove/hide any per-player innings displays in APA Practice gameplay UI.",
      "reqIds": [
        "REQ-125"
      ],
      "version": 1
    },
    {
      "id": "feature-update-apa-9-ball-practice-scoring-display-so-the-on-screen-match-score-totals-for-each-player-update-immediately-as-balls-are-pocketed-unpocketed-dead-balled-during-rack-entry-not-only-after-pressing-complete-rack-this-includes-updating-the-large-score-shown-on-frontend-src-pages-apa-practicegamepage-tsx-to-reflect-current-match-totals-plus-the-current-rack-s-live-totals",
      "title": "Update APA 9-Ball Practice scoring display so the on-screen match score totals for each player update immediately as balls are pocketed/unpocketed/dead-balled during rack entry (not only after pressing “Complete Rack”). This includes updating the large score shown on `frontend/src/pages/apa/PracticeGamePage.tsx` to reflect current match totals plus the current rack’s live totals.",
      "reqIds": [
        "REQ-126"
      ],
      "version": 1
    },
    {
      "id": "feature-change-apa-rack-ball-tap-behavior-to-a-3-state-cycle-with-no-new-buttons-first-tap-marks-the-ball-as-pocketed-for-the-current-active-player-second-tap-marks-it-as-a-dead-ball-third-tap-clears-it-back-to-unpocketed-unscored-ensure-dead-balls-continue-to-be-tracked-in-the-per-rack-per-match-summary-data",
      "title": "Change APA rack ball tap behavior to a 3-state cycle with no new buttons: first tap marks the ball as pocketed for the current active player, second tap marks it as a dead ball, third tap clears it back to unpocketed/unscored. Ensure dead balls continue to be tracked in the per-rack/per-match summary data.",
      "reqIds": [
        "REQ-127"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-save-changes-button-in-the-edit-your-profile-dialog-so-it-reliably-responds-to-clicks-and-saves-the-profile-add-clear-english-error-feedback-if-saving-fails-and-prevent-the-ui-from-appearing-to-do-nothing",
      "title": "Fix the “Save Changes” button in the Edit Your Profile dialog so it reliably responds to clicks and saves the profile. Add clear English error feedback if saving fails, and prevent the UI from appearing to do nothing.",
      "reqIds": [
        "REQ-128"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-apa-9-ball-practice-rack-transitions-so-that-the-active-player-continues-their-turn-into-the-next-rack-when-a-rack-is-completed-do-not-reset-the-active-player-back-to-player-1-at-the-start-of-every-new-rack",
      "title": "Fix APA 9-Ball Practice rack transitions so that the active player continues their turn into the next rack when a rack is completed (do not reset the active player back to Player 1 at the start of every new rack).",
      "reqIds": [
        "REQ-129"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-apa-9-ball-practice-gameplay-ui-to-display-dead-ball-totals-under-the-innings-line-in-the-same-area-where-innings-are-shown-using-clear-english-labeling",
      "title": "Update the APA 9-Ball Practice gameplay UI to display dead-ball totals under the innings line (in the same area where innings are shown), using clear English labeling.",
      "reqIds": [
        "REQ-130"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-apa-9-ball-practice-innings-increment-timing-is-correct-innings-must-increment-after-player-2-s-turn-is-over-i-e-when-the-user-turns-over-from-player-2-back-to-player-1-and-must-not-increment-after-player-1-s-turnover",
      "title": "Ensure APA 9-Ball Practice innings increment timing is correct: innings must increment after Player 2’s turn is over (i.e., when the user turns over from Player 2 back to Player 1), and must not increment after Player 1’s turnover.",
      "reqIds": [
        "REQ-131"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-apa-9-ball-practice-match-completion-save-button-so-it-does-not-remain-stuck-showing-connecting-after-the-match-is-over-provide-a-clear-recovery-path-if-the-backend-actor-is-not-available-yet",
      "title": "Fix the APA 9-Ball Practice match completion save button so it does not remain stuck showing “Connecting...” after the match is over; provide a clear recovery path if the backend actor is not available yet.",
      "reqIds": [
        "REQ-132"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-edit-profile-dialog-save-button-so-it-does-not-remain-stuck-showing-connecting-and-blocking-profile-saves-provide-a-clear-recovery-path-if-the-backend-actor-is-not-available-yet",
      "title": "Fix the Edit Profile dialog save button so it does not remain stuck showing “Connecting...” and blocking profile saves; provide a clear recovery path if the backend actor is not available yet.",
      "reqIds": [
        "REQ-133"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-apa-9-ball-rack-scoring-so-that-when-the-9-ball-is-marked-as-pocketed-before-the-rack-is-otherwise-fully-accounted-all-remaining-unscored-balls-1-8-are-automatically-treated-as-dead-balls-for-that-rack-the-rack-totals-immediately-reach-10-points-and-the-complete-rack-button-becomes-enabled-without-requiring-any-additional-taps",
      "title": "Fix APA 9-ball rack scoring so that when the 9-ball is marked as pocketed before the rack is otherwise fully accounted, all remaining unscored balls (1–8) are automatically treated as dead balls for that rack, the rack totals immediately reach 10 points, and the \"Complete Rack\" button becomes enabled without requiring any additional taps.",
      "reqIds": [
        "REQ-134"
      ],
      "version": 1
    },
    {
      "id": "feature-enforce-that-the-9-ball-can-never-be-put-into-the-dead-ball-state-in-the-apa-9-ball-scoring-ui-including-both-manual-taps-and-any-auto-dead-behaviors",
      "title": "Enforce that the 9-ball can never be put into the \"dead ball\" state in the APA 9-ball scoring UI, including both manual taps and any auto-dead behaviors.",
      "reqIds": [
        "REQ-135"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-apa-9-ball-practice-matches-end-immediately-when-either-player-reaches-or-exceeds-their-points-to-win-target-and-prevent-any-displayed-or-saved-totals-from-ever-exceeding-that-player-s-target-including-during-live-rack-entry",
      "title": "Ensure APA 9-ball practice matches end immediately when either player reaches or exceeds their points-to-win target, and prevent any displayed or saved totals from ever exceeding that player’s target (including during live rack entry).",
      "reqIds": [
        "REQ-136"
      ],
      "version": 1
    },
    {
      "id": "feature-in-the-apa-9-ball-practice-scorekeeper-ui-replace-the-user-facing-label-text-shared-innings-with-innings-anywhere-it-appears-while-keeping-the-underlying-shared-innings-behavior-unchanged",
      "title": "In the APA 9-Ball Practice scorekeeper UI, replace the user-facing label text “Shared Innings” with “Innings” anywhere it appears (while keeping the underlying shared-innings behavior unchanged).",
      "reqIds": [
        "REQ-137"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-apa-practice-gameplay-so-the-user-can-always-finish-the-final-rack-and-proceed-past-the-rack-scoring-screen-when-the-match-ending-condition-is-reached-mid-rack-i-e-when-a-player-reaches-exceeds-their-points-to-win-target-before-the-rack-naturally-totals-10-points-specifically-ensure-the-complete-rack-button-becomes-enabled-by-automatically-accounting-for-the-rest-of-the-rack-mark-remaining-unscored-balls-as-dead-as-needed-so-the-rack-totals-reach-10-and-the-user-can-tap-complete-rack-to-finish-the-match",
      "title": "Fix APA Practice gameplay so the user can always finish the final rack and proceed past the rack-scoring screen when the match-ending condition is reached mid-rack (i.e., when a player reaches/exceeds their points-to-win target before the rack naturally totals 10 points). Specifically, ensure the \"Complete Rack\" button becomes enabled by automatically accounting for the rest of the rack (mark remaining unscored balls as Dead as needed) so the rack totals reach 10 and the user can tap \"Complete Rack\" to finish the match.",
      "reqIds": [
        "REQ-138"
      ],
      "version": 1
    },
    {
      "id": "feature-update-apa-practice-target-limit-behavior-so-the-match-score-shown-and-saved-never-exceeds-a-player-s-points-to-win-target-including-the-edge-case-where-a-player-is-1-point-away-from-their-target-and-then-pockets-the-9-ball-worth-2-points-in-that-case-allow-recording-the-9-ball-pocket-but-clamp-the-player-s-displayed-and-saved-match-total-to-exactly-their-target-not-target-1",
      "title": "Update APA Practice target-limit behavior so the match score shown and saved never exceeds a player's points-to-win target, including the edge case where a player is 1 point away from their target and then pockets the 9-ball (worth 2 points). In that case, allow recording the 9-ball pocket, but clamp the player's displayed and saved match total to exactly their target (not target+1).",
      "reqIds": [
        "REQ-139"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-apa-9-ball-practice-match-results-saving-so-the-user-can-always-click-save-match-when-the-match-is-complete-and-the-user-is-authenticated-and-provide-clear-english-ui-feedback-recovery-when-backend-connection-is-not-ready",
      "title": "Fix APA 9-Ball Practice match-results saving so the user can always click “Save Match” when the match is complete and the user is authenticated, and provide clear English UI feedback/recovery when backend connection is not ready.",
      "reqIds": [
        "REQ-140"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-apa-practice-scoring-rule-when-a-player-is-exactly-1-point-away-from-their-points-to-win-target-pocketing-the-9-ball-must-only-increase-that-player-s-match-total-by-1-point-otherwise-the-9-ball-remains-worth-2-points",
      "title": "Implement the APA Practice scoring rule: when a player is exactly 1 point away from their points-to-win target, pocketing the 9-ball must only increase that player’s match total by 1 point; otherwise the 9-ball remains worth 2 points.",
      "reqIds": [
        "REQ-141"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-apa-practice-rack-scoring-validation-and-rack-completion-remain-usable-under-the-9-ball-from-1-point-away-scenario-no-dead-end-state-where-the-rack-cannot-be-completed",
      "title": "Ensure APA Practice rack-scoring validation and rack completion remain usable under the “9-ball from 1 point away” scenario (no dead-end state where the rack cannot be completed).",
      "reqIds": [
        "REQ-142"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-apa-practice-9-ball-scoring-edge-case-so-that-when-the-active-player-is-exactly-1-point-away-from-their-points-to-win-target-pocketing-the-9-ball-increases-that-player-s-rack-match-points-by-exactly-1-point-not-2-in-all-other-situations-the-9-ball-remains-worth-2-points-do-not-change-any-other-apa-scoring-rules-rack-accounting-rules-10-points-per-rack-innings-defensive-shot-tracking-or-other-modes",
      "title": "Fix the APA Practice 9-ball scoring edge case so that when the active player is exactly 1 point away from their points-to-win target, pocketing the 9-ball increases that player’s rack/match points by exactly 1 point (not 2). In all other situations, the 9-ball remains worth 2 points. Do not change any other APA scoring rules, rack accounting rules (10 points per rack), innings/defensive-shot tracking, or other modes.",
      "reqIds": [
        "REQ-143"
      ],
      "version": 1
    },
    {
      "id": "feature-update-apa-9-ball-rack-scoring-so-the-9-ball-tap-is-never-blocked-by-the-target-limit-would-exceed-target-check-in-frontend-src-components-apa-aparackscoringpanel-tsx-handleballclick-allow-the-9-ball-to-be-toggled-from-unscored-to-pocketed-for-the-active-player-even-when-the-active-player-is-at-near-their-points-to-win-target-after-the-tap-apply-the-existing-one-point-away-override-9-ball-worth-1-when-exactly-1-point-remains-and-rely-on-existing-clamping-behavior-for-displayed-saved-match-totals",
      "title": "Update APA 9-ball rack scoring so the 9-ball tap is never blocked by the target-limit/\"would exceed target\" check. In `frontend/src/components/apa/ApaRackScoringPanel.tsx` `handleBallClick`, allow the 9-ball to be toggled from unscored to pocketed for the active player even when the active player is at/near their points-to-win target; after the tap, apply the existing one-point-away override (9-ball worth 1 when exactly 1 point remains) and rely on existing clamping behavior for displayed/saved match totals.",
      "reqIds": [
        "REQ-144"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-apa-rack-auto-dead-behavior-so-the-9-ball-is-never-auto-marked-as-a-dead-ball-during-match-completion-imminent-auto-dead-filling-in-frontend-src-components-apa-aparackscoringpanel-tsx-ensure-the-match-completion-imminent-auto-dead-set-and-application-logic-only-targets-balls-1-8-never-ball-9-so-the-9-ball-remains-tappable-and-can-be-marked-pocketed-to-lock-finish-the-rack-when-appropriate",
      "title": "Fix APA rack auto-dead behavior so the 9-ball is never auto-marked as a dead ball during match-completion-imminent auto-dead filling. In `frontend/src/components/apa/ApaRackScoringPanel.tsx`, ensure the match-completion-imminent auto-dead set and application logic only targets balls 1–8 (never ball 9), so the 9-ball remains tappable and can be marked pocketed to lock/finish the rack when appropriate.",
      "reqIds": [
        "REQ-145"
      ],
      "version": 1
    },
    {
      "id": "feature-update-react-query-hooks-in-frontend-src-hooks-usequeries-ts-to-avoid-deadlocking-the-app-by-disabling-queries-solely-due-to-useactor-isfetching-queries-that-require-an-actor-should-be-enabled-whenever-actor-is-non-null-do-not-require-isfetching-as-an-additional-condition",
      "title": "Update React Query hooks in `frontend/src/hooks/useQueries.ts` to avoid deadlocking the app by disabling queries solely due to `useActor().isFetching`. Queries that require an actor should be enabled whenever `actor` is non-null; do not require `!isFetching` as an additional condition.",
      "reqIds": [
        "REQ-147"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-apa-practice-match-completion-save-ux-frontend-src-pages-apa-practicegamepage-tsx-so-saving-never-appears-stuck-or-unclickable-the-save-match-button-must-be-clickable-as-soon-as-an-actor-exists-if-the-actor-is-still-unavailable-after-a-reasonable-wait-show-an-english-inline-message-and-a-user-invokable-retry-connection-action-using-frontend-src-hooks-useactorretry-ts-and-keep-the-ui-responsive",
      "title": "Fix the APA Practice match completion save UX (`frontend/src/pages/apa/PracticeGamePage.tsx`) so saving never appears stuck or unclickable: the “Save Match” button must be clickable as soon as an actor exists; if the actor is still unavailable after a reasonable wait, show an English inline message and a user-invokable “Retry Connection” action using `frontend/src/hooks/useActorRetry.ts` (and keep the UI responsive).",
      "reqIds": [
        "REQ-148"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-straight-shot-20-shot-game-session-saving-frontend-src-pages-straight-shot-straightshotgamepage-tsx-so-the-end-save-flow-does-not-become-stuck-on-connecting-or-permanently-disabled-provide-the-same-fast-fail-and-retry-connection-recovery-pattern-when-the-actor-is-unavailable",
      "title": "Fix Straight Shot (20-shot game) session saving (`frontend/src/pages/straight-shot/StraightShotGamePage.tsx`) so the End/Save flow does not become stuck on “Connecting…” or permanently disabled. Provide the same fast-fail and retry-connection recovery pattern when the actor is unavailable.",
      "reqIds": [
        "REQ-149"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-accepting-gifts-session-saving-frontend-src-pages-accepting-gifts-acceptinggiftsgamepage-tsx-so-the-end-save-flow-does-not-become-stuck-on-connecting-or-permanently-disabled-provide-the-same-fast-fail-and-retry-connection-recovery-pattern-when-the-actor-is-unavailable",
      "title": "Fix Accepting Gifts session saving (`frontend/src/pages/accepting-gifts/AcceptingGiftsGamePage.tsx`) so the End/Save flow does not become stuck on “Connecting…” or permanently disabled. Provide the same fast-fail and retry-connection recovery pattern when the actor is unavailable.",
      "reqIds": [
        "REQ-150"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-official-real-apa-match-log-create-edit-saving-frontend-src-components-apa-realapamatchform-tsx-so-save-update-never-remains-permanently-disabled-showing-connecting-for-authenticated-users-when-a-usable-actor-exists-the-form-must-allow-submission-as-soon-as-actor-is-non-null-even-if-the-actor-hook-is-fetching-refetching-in-the-background-and-must-provide-a-clear-retry-path-if-actor-stays-unavailable",
      "title": "Fix Official/Real APA Match Log create/edit saving (`frontend/src/components/apa/RealApaMatchForm.tsx`) so Save/Update never remains permanently disabled showing “Connecting…” for authenticated users when a usable actor exists. The form must allow submission as soon as `actor` is non-null, even if the actor hook is fetching/refetching in the background, and must provide a clear retry path if `actor` stays unavailable.",
      "reqIds": [
        "REQ-151"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-edit-profile-save-changes-reliability-in-frontend-src-components-auth-profilesetupdialog-tsx-ensure-the-primary-submit-button-does-not-become-unclickable-or-stuck-on-connecting-when-an-actor-exists-and-when-the-actor-is-not-available-provide-a-clear-english-recovery-path-retry-connection-fast-fail-messaging-without-the-ui-appearing-to-do-nothing",
      "title": "Fix the Edit Profile “Save Changes” reliability in `frontend/src/components/auth/ProfileSetupDialog.tsx`: ensure the primary submit button does not become unclickable or stuck on “Connecting…” when an actor exists; and when the actor is not available, provide a clear English recovery path (retry connection + fast-fail messaging) without the UI appearing to do nothing.",
      "reqIds": [
        "REQ-152"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-apa-9-ball-practice-so-that-when-either-player-reaches-exceeds-their-points-to-win-target-during-live-rack-entry-the-current-rack-can-be-completed-immediately-without-requiring-the-9-ball-to-be-pocketed-i-e-do-not-force-the-user-to-score-the-9-ball-just-to-enable-complete-rack",
      "title": "Fix APA 9-Ball Practice so that when either player reaches/exceeds their points-to-win target during live rack entry, the current rack can be completed immediately without requiring the 9-ball to be pocketed (i.e., do not force the user to score the 9-ball just to enable “Complete Rack”).",
      "reqIds": [
        "REQ-153"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-apa-rack-scoring-ui-messaging-feedback-to-accurately-describe-the-above-behavior-in-english-when-match-completion-is-reached-mid-rack-and-the-rack-can-be-finalized-without-the-9-ball",
      "title": "Update the APA rack-scoring UI messaging/feedback to accurately describe the above behavior in English when match completion is reached mid-rack and the rack can be finalized without the 9-ball.",
      "reqIds": [
        "REQ-154"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-straight-shot-20-shot-game-codepath-is-not-modified-as-part-of-this-change-no-logic-ui-persistence-or-copy-changes",
      "title": "Ensure the Straight Shot (20-shot game) codepath is not modified as part of this change (no logic, UI, persistence, or copy changes).",
      "reqIds": [
        "REQ-155"
      ],
      "version": 1
    },
    {
      "id": "feature-add-per-mode-resume-game-support-for-apa-9-ball-practice-accepting-gifts-and-straight-shot-using-the-existing-per-mode-sessionstorage-in-progress-state-keys-apa-sessionstorage-apapracticegame-accepting-gifts-sessionstorage-acceptinggiftsgame-straight-shot-sessionstorage-straightshotgame-each-mode-must-expose-a-resume-action-that-is-only-visible-when-that-specific-mode-has-an-in-progress-session-stored-and-clicking-resume-must-navigate-directly-to-that-mode-s-in-progress-game-page",
      "title": "Add per-mode “Resume Game” support for APA 9-Ball Practice, Accepting Gifts, and Straight Shot using the existing per-mode sessionStorage in-progress state keys (APA: `sessionStorage['apaPracticeGame']`, Accepting Gifts: `sessionStorage['acceptingGiftsGame']`, Straight Shot: `sessionStorage['straightShotGame']`). Each mode must expose a Resume action that is only visible when that specific mode has an in-progress session stored, and clicking Resume must navigate directly to that mode’s in-progress game page.",
      "reqIds": [
        "REQ-156"
      ],
      "version": 1
    },
    {
      "id": "feature-enforce-single-slot-per-mode-in-progress-sessions-and-add-a-confirmation-dialog-when-a-user-starts-a-new-game-in-a-mode-that-already-has-an-in-progress-session-for-that-same-mode-the-dialog-must-clearly-ask-whether-to-end-the-current-in-progress-game-and-start-a-new-one-confirming-must-clear-that-mode-s-sessionstorage-key-and-proceed-to-create-a-new-session-canceling-must-keep-the-existing-session-intact-and-not-navigate-into-a-new-session",
      "title": "Enforce “single-slot per mode” in-progress sessions and add a confirmation dialog when a user starts a new game in a mode that already has an in-progress session for that same mode. The dialog must clearly ask whether to end the current in-progress game and start a new one; confirming must clear that mode’s sessionStorage key and proceed to create a new session; canceling must keep the existing session intact and not navigate into a new session.",
      "reqIds": [
        "REQ-157"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-home-mode-cards-and-or-each-mode-s-start-page-ui-so-that-the-user-can-clearly-perform-both-actions-when-applicable-1-resume-game-when-an-in-progress-session-exists-for-that-mode-and-2-start-new-game-always-available-but-may-trigger-the-confirmation-dialog-from-req-157-if-a-session-exists-implement-without-breaking-existing-navigation-paths-defined-in-frontend-src-pages-homepage-tsx-and-frontend-src-components-navigation-modecard-tsx",
      "title": "Update the Home mode cards and/or each mode’s Start page UI so that the user can clearly perform both actions when applicable: (1) Resume Game (when an in-progress session exists for that mode) and (2) Start New Game (always available, but may trigger the confirmation dialog from REQ-157 if a session exists). Implement without breaking existing navigation paths defined in `frontend/src/pages/HomePage.tsx` and `frontend/src/components/navigation/ModeCard.tsx`.",
      "reqIds": [
        "REQ-158"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-apa-9-ball-practice-post-rack-turn-over-bug-so-that-turn-over-is-not-clickable-once-the-rack-is-complete-and-the-user-is-expected-to-finalize-the-rack-i-e-when-the-rack-is-complete-and-complete-rack-can-be-pressed-implement-this-within-frontend-src-components-apa-aparackscoringpanel-tsx-by-disabling-turn-over-while-the-rack-is-in-a-complete-finalizable-state-while-preserving-existing-inning-tracking-behavior-and-all-other-rack-scoring-rules",
      "title": "Fix the APA 9-Ball Practice “post-rack Turn Over” bug so that “Turn Over” is not clickable once the rack is complete and the user is expected to finalize the rack (i.e., when the rack is complete and “Complete Rack” can be pressed). Implement this within `frontend/src/components/apa/ApaRackScoringPanel.tsx` by disabling Turn Over while the rack is in a complete/finalizable state, while preserving existing inning tracking behavior and all other rack scoring rules.",
      "reqIds": [
        "REQ-159"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-mode-tile-ui-so-that-when-a-resume-action-is-available-it-is-rendered-below-the-start-new-game-button-not-above-it-without-changing-the-existing-resume-visibility-logic-or-navigation-behavior",
      "title": "Update the mode tile UI so that when a Resume action is available it is rendered below the “Start New Game” button (not above it), without changing the existing resume visibility logic or navigation behavior.",
      "reqIds": [
        "REQ-161"
      ],
      "version": 1
    },
    {
      "id": "feature-provide-a-clear-developer-facing-outline-of-exactly-what-will-change-in-this-build-to-ensure-version-48-behavior-remains-intact-aside-from-the-resume-button-placement-adjustment",
      "title": "Provide a clear, developer-facing outline of exactly what will change in this build to ensure Version 48 behavior remains intact aside from the Resume button placement adjustment.",
      "reqIds": [
        "REQ-162"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-home-screen-official-apa-match-log-mode-tile-copy-and-cta-text-remove-the-text-coming-soon-from-the-description-under-official-apa-match-log-and-change-the-tile-s-primary-button-label-from-start-new-game-to-exactly-log-apa-match-english",
      "title": "Update the Home screen Official APA Match Log mode tile copy and CTA text: remove the text \"(Coming Soon)\" from the description under \"Official APA Match Log\", and change the tile’s primary button label from \"Start New Game\" to exactly \"Log APA Match\" (English).",
      "reqIds": [
        "REQ-163"
      ],
      "version": 1
    },
    {
      "id": "feature-extend-frontend-src-components-navigation-modecard-tsx-to-support-a-custom-primary-cta-label-defaults-to-the-existing-start-new-game-so-that-the-official-apa-match-log-card-can-display-log-apa-match-while-other-cards-keep-their-current-labels",
      "title": "Extend `frontend/src/components/navigation/ModeCard.tsx` to support a custom primary CTA label (defaults to the existing \"Start New Game\") so that the Official APA Match Log card can display \"Log APA Match\" while other cards keep their current labels.",
      "reqIds": [
        "REQ-164"
      ],
      "version": 1
    },
    {
      "id": "feature-change-home-screen-mode-tile-start-button-styling-so-that-accepting-gifts-and-straight-shot-match-apa-s-behavior-the-primary-start-button-is-green-default-when-there-is-no-in-progress-session-for-that-mode-and-becomes-grey-outline-when-a-resume-session-exists-do-not-change-any-navigation-or-resume-visibility-logic",
      "title": "Change Home-screen mode tile Start button styling so that Accepting Gifts and Straight Shot match APA’s behavior: the primary Start button is green/\"default\" when there is no in-progress session for that mode and becomes grey/\"outline\" when a Resume session exists. Do not change any navigation or Resume visibility logic.",
      "reqIds": [
        "REQ-165"
      ],
      "version": 1
    },
    {
      "id": "feature-update-each-mode-start-page-apa-practice-accepting-gifts-straight-shot-so-that-when-a-resume-session-exists-the-resume-action-appears-below-the-start-action-start-match-start-session-instead-of-in-an-alert-above-the-form-keep-all-existing-resume-visibility-logic-confirmation-dialog-behavior-for-starting-a-new-game-and-navigation-targets-unchanged",
      "title": "Update each mode Start page (APA Practice, Accepting Gifts, Straight Shot) so that when a Resume session exists, the Resume action appears below the \"Start\" action (Start Match / Start Session) instead of in an alert above the form. Keep all existing resume visibility logic, confirmation-dialog behavior for starting a new game, and navigation targets unchanged.",
      "reqIds": [
        "REQ-166"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-end-session-without-saving-action-anywhere-the-app-currently-offers-only-an-end-and-save-flow-for-in-progress-sessions-covering-apa-practice-accepting-gifts-and-straight-shot-this-new-action-must-clear-the-relevant-per-mode-sessionstorage-in-progress-session-key-and-return-the-user-to-a-sensible-page-e-g-that-mode-s-start-page-or-home-without-calling-any-save-update-mutations",
      "title": "Add an \"End Session Without Saving\" action anywhere the app currently offers only an end-and-save flow for in-progress sessions, covering: APA Practice, Accepting Gifts, and Straight Shot. This new action must clear the relevant per-mode sessionStorage in-progress session key and return the user to a sensible page (e.g., that mode’s Start page or Home), without calling any save/update mutations.",
      "reqIds": [
        "REQ-167"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-stats-entry-point-in-the-main-header-next-to-the-existing-profile-and-login-controls-and-implement-a-tabbed-stats-panel-page-that-reuses-existing-stats-computations-components-where-possible-the-panel-must-include-at-minimum-1-apa-per-player-aggregate-charts-existing-chart-module-and-2-a-clear-navigation-path-back-to-the-prior-page-all-user-facing-text-must-be-in-english",
      "title": "Add a Stats entry point in the main header (next to the existing profile and login controls) and implement a tabbed Stats panel/page that reuses existing stats computations/components where possible. The panel must include at minimum: (1) APA per-player aggregate charts (existing chart module) and (2) a clear navigation path back to the prior page. All user-facing text must be in English.",
      "reqIds": [
        "REQ-169"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-existing-stats-hub-page-frontend-src-pages-stats-statspage-tsx-into-a-tabbed-stats-system-that-defaults-to-the-official-apa-tab-and-surfaces-the-key-stats-metrics-not-charts-only-for-official-apa-straight-shot-and-accepting-gifts-while-keeping-all-user-facing-text-in-english",
      "title": "Update the existing Stats hub page (`frontend/src/pages/stats/StatsPage.tsx`) into a tabbed Stats system that defaults to the Official APA tab and surfaces the key stats/metrics (not charts only) for Official APA, Straight Shot, and Accepting Gifts, while keeping all user-facing text in English.",
      "reqIds": [
        "REQ-170"
      ],
      "version": 1
    },
    {
      "id": "feature-on-the-official-apa-tab-in-frontend-src-pages-stats-statspage-tsx-reuse-existing-apa-charting-computation-modules-where-possible-but-also-show-explicit-metric-summaries-derived-from-the-signed-in-user-s-match-history-e-g-win-rate-when-determinable-average-ppi-where-available-using-the-existing-official-apa-helpers-frontend-src-lib-apa-officialapappi-ts-frontend-src-lib-apa-officialapaoutcome-ts-and-existing-extractors-in-frontend-src-lib-apa-apaaggregatestats-ts",
      "title": "On the Official APA tab in `frontend/src/pages/stats/StatsPage.tsx`, reuse existing APA charting/computation modules where possible, but also show explicit metric summaries derived from the signed-in user’s match history (e.g., win rate when determinable, average PPI where available), using the existing official APA helpers (`frontend/src/lib/apa/officialApaPpi.ts`, `frontend/src/lib/apa/officialApaOutcome.ts`) and existing extractors in `frontend/src/lib/apa/apaAggregateStats.ts`.",
      "reqIds": [
        "REQ-171"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-straight-shot-tab-on-the-stats-page-that-displays-the-straight-shot-rolling-average-for-the-signed-in-user-based-on-saved-match-history-and-present-it-as-a-clear-metric-and-optionally-a-simple-trend-chart-if-already-easy-to-reuse-the-computation-must-match-the-current-straight-shot-history-shape-used-elsewhere-e-g-use-strokes-0-when-present-falling-back-to-totalscore-only-for-older-records",
      "title": "Add a Straight Shot tab on the Stats page that displays the Straight Shot rolling average for the signed-in user based on saved match history, and present it as a clear metric (and optionally a simple trend/chart if already easy to reuse). The computation must match the current Straight Shot history shape used elsewhere (e.g., use `strokes[0]` when present, falling back to `totalScore` only for older records).",
      "reqIds": [
        "REQ-172"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-accepting-gifts-tab-on-the-stats-page-that-shows-only-1-the-current-progression-state-current-object-ball-count-and-2-a-rolling-average-metric-if-available-from-saved-accepting-gifts-matches-do-not-implement-historical-per-set-charts",
      "title": "Add an Accepting Gifts tab on the Stats page that shows only (1) the current progression state (current object-ball count) and (2) a rolling average metric if available from saved Accepting Gifts matches; do not implement historical per-set charts.",
      "reqIds": [
        "REQ-173"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-there-is-a-clear-discoverable-navigation-path-from-the-main-app-ui-to-the-stats-hub-and-that-it-works-for-authenticated-users-without-altering-or-replacing-the-existing-per-player-aggregate-stats-page-frontend-src-pages-players-playeraggregatestatspage-tsx",
      "title": "Ensure there is a clear, discoverable navigation path from the main app UI to the Stats hub and that it works for authenticated users without altering or replacing the existing per-player Aggregate Stats page (`frontend/src/pages/players/PlayerAggregateStatsPage.tsx`).",
      "reqIds": [
        "REQ-174"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-clear-header-level-loading-connecting-indicator-state-so-it-is-obvious-when-header-actions-especially-profile-settings-are-still-initializing-and-may-appear-later-than-the-stats-button-do-not-change-existing-authentication-or-navigation-behavior",
      "title": "Add a clear header-level loading/connecting indicator state so it is obvious when header actions (especially Profile/Settings) are still initializing and may appear later than the Stats button; do not change existing authentication or navigation behavior.",
      "reqIds": [
        "REQ-175"
      ],
      "version": 1
    },
    {
      "id": "feature-on-the-stats-page-frontend-src-pages-stats-statspage-tsx-in-the-viewing-stats-for-section-add-a-view-match-history-button-directly-under-or-alongside-view-player-aggregate-stats-when-match-history-is-accessed-from-this-button-match-history-must-show-a-top-back-link-labeled-back-to-stats-that-navigates-to-stats",
      "title": "On the Stats page (frontend/src/pages/stats/StatsPage.tsx), in the \"Viewing stats for\" section, add a \"View Match History\" button directly under (or alongside) \"View Player Aggregate Stats\"; when Match History is accessed from this button, Match History must show a top back link labeled \"Back to Stats\" that navigates to /stats.",
      "reqIds": [
        "REQ-176"
      ],
      "version": 1
    },
    {
      "id": "feature-make-match-history-header-back-link-context-aware-if-match-history-is-accessed-from-the-stats-page-it-must-display-back-to-stats-navigating-to-stats-if-accessed-from-the-home-page-it-must-display-back-to-home-navigating-to-preserve-all-existing-filtering-sorting-and-match-card-behavior",
      "title": "Make Match History header back-link context-aware: if Match History is accessed from the Stats page it must display \"Back to Stats\" (navigating to /stats); if accessed from the Home page it must display \"Back to Home\" (navigating to /). Preserve all existing filtering, sorting, and match card behavior.",
      "reqIds": [
        "REQ-177"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-aggregate-stats-page-back-navigation-on-the-per-player-aggregate-stats-page-frontend-src-pages-players-playeraggregatestatspage-tsx-change-the-current-back-button-behavior-so-that-when-the-user-came-from-the-stats-page-the-back-button-navigates-back-to-stats-not-match-history-and-the-label-is-back-to-stats-do-not-remove-the-ability-to-reach-this-page-from-other-entry-points-e-g-match-details",
      "title": "Fix the Aggregate Stats page back navigation: on the per-player Aggregate Stats page (frontend/src/pages/players/PlayerAggregateStatsPage.tsx), change the current back button behavior so that when the user came from the Stats page, the back button navigates back to /stats (not Match History) and the label is \"Back to Stats\". Do not remove the ability to reach this page from other entry points (e.g., Match Details).",
      "reqIds": [
        "REQ-178"
      ],
      "version": 1
    },
    {
      "id": "feature-update-apa-aggregate-stats-computations-and-summary-display-to-match-the-confirmed-requirements-1-ppi-average-is-best-10-out-of-last-20-2-show-both-average-ppi-and-average-appi-3-remove-hide-total-innings-from-apa-aggregate-stats-displays-4-ensure-appi-uses-the-previously-discussed-rule-including-the-win-too-many-innings-fallback-behavior-and-5-show-two-predicted-estimated-skill-levels-one-derived-from-ppi-and-one-derived-from-appi-using-the-user-s-appi-to-skill-level-range-table-used-by-the-app-s-appi-logic",
      "title": "Update APA Aggregate Stats computations and summary display to match the confirmed requirements: (1) PPI average is \"best 10 out of last 20\"; (2) show both Average PPI and Average aPPI; (3) remove/hide total innings from APA aggregate stats displays; (4) ensure aPPI uses the previously discussed rule (including the win 'too many innings' fallback behavior); and (5) show two predicted/estimated skill levels—one derived from PPI and one derived from aPPI—using the user’s aPPI-to-skill-level range table used by the app’s aPPI logic.",
      "reqIds": [
        "REQ-179"
      ],
      "version": 1
    },
    {
      "id": "feature-update-apa-aggregate-charts-to-match-the-confirmed-chart-requirements-1-ppi-trend-chart-must-include-match-dates-and-match-the-intended-layout-style-time-based-trend-not-undated-points-only-2-match-results-chart-must-plot-two-lines-your-points-and-opponent-points-and-also-plot-defensive-shots-as-a-line-series-preserve-existing-charting-components-where-possible-frontend-src-components-players-apaaggregatecharts-tsx",
      "title": "Update APA Aggregate charts to match the confirmed chart requirements: (1) PPI trend chart must include match dates and match the intended layout style (time-based trend, not undated points-only); (2) Match Results chart must plot two lines (your points and opponent points) and also plot defensive shots as a line series; preserve existing charting components where possible (frontend/src/components/players/ApaAggregateCharts.tsx).",
      "reqIds": [
        "REQ-180"
      ],
      "version": 1
    },
    {
      "id": "feature-enhance-straight-shot-stats-on-the-stats-page-add-1-a-straight-shot-trend-graph-currently-missing-2-a-lowest-shot-count-metric-with-the-date-it-occurred-and-3-a-dropdown-to-switch-straight-shot-average-scope-between-last-20-sessions-and-lifetime-while-keeping-the-existing-rolling-average-behavior-available",
      "title": "Enhance Straight Shot stats on the Stats page: add (1) a Straight Shot trend graph (currently missing), (2) a \"Lowest Shot Count\" metric with the date it occurred, and (3) a dropdown to switch Straight Shot average scope between \"Last 20 Sessions\" and \"Lifetime\" while keeping the existing rolling average behavior available.",
      "reqIds": [
        "REQ-181"
      ],
      "version": 1
    },
    {
      "id": "feature-add-two-explicit-save-actions-to-official-real-apa-match-log-saving-ui-save-log-another-match-and-save-exit-preserve-all-existing-match-log-validation-persistence-and-navigation-behavior-otherwise-ensure-each-action-performs-the-appropriate-post-save-navigation-log-another-returns-to-the-create-form-ready-for-a-new-entry-save-exit-returns-to-a-sensible-destination-consistent-with-current-ux",
      "title": "Add two explicit save actions to Official/Real APA Match Log saving UI: \"Save & Log Another Match\" and \"Save & Exit\". Preserve all existing match-log validation, persistence, and navigation behavior otherwise; ensure each action performs the appropriate post-save navigation (log another returns to the create form ready for a new entry; save & exit returns to a sensible destination consistent with current UX).",
      "reqIds": [
        "REQ-182"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-accepting-gifts-gameplay-to-match-the-confirmed-rules-starting-ball-count-chosen-2-7-each-attempt-is-a-single-run-out-try-with-user-input-0-1-2-3-input-3-awards-1-point-to-the-player-input-0-2-awards-1-point-to-the-ghost-a-set-is-a-race-to-7-points-live-scoreboard-must-display-me-x-y-ghost-during-the-set-when-either-side-reaches-7-end-the-set-increment-sets-completed-by-1-and-adjust-the-current-object-ball-count-1-if-player-won-1-if-ghost-won-clamped-to-2-7-then-start-the-next-set-with-the-scoreboard-reset-to-0-0",
      "title": "Fix Accepting Gifts gameplay to match the confirmed rules: starting ball count chosen 2–7; each attempt is a single run-out try with user input 0/1/2/3; input 3 awards 1 point to the player; input 0–2 awards 1 point to the ghost; a set is a race to 7 points; live scoreboard must display \"Me X – Y Ghost\" during the set; when either side reaches 7, end the set, increment Sets Completed by 1, and adjust the current object-ball count (+1 if player won, −1 if ghost won) clamped to 2–7; then start the next set with the scoreboard reset to 0–0.",
      "reqIds": [
        "REQ-183"
      ],
      "version": 1
    },
    {
      "id": "feature-update-accepting-gifts-session-lifecycle-and-save-gating-the-end-session-save-action-button-must-only-be-visible-enabled-after-the-current-set-has-completed-i-e-after-a-7-x-or-x-7-score-it-must-not-be-visible-during-an-in-progress-set",
      "title": "Update Accepting Gifts session lifecycle and save gating: the \"End Session & Save\" action/button must only be visible/enabled after the current set has completed (i.e., after a 7–X or X–7 score). It must not be visible during an in-progress set.",
      "reqIds": [
        "REQ-184"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-accepting-gifts-saved-session-summary-and-completion-status-when-the-session-is-saved-the-saved-record-must-store-starting-ball-count-ending-ball-count-the-current-ball-count-at-session-end-total-attempts-sets-completed-final-set-score-me-vs-ghost-for-the-last-set-played-and-status-completed-match-history-and-match-details-must-display-completed-and-must-never-show-impossible-session-details-e-g-final-set-score-0-1-wildly-inflated-attempts-sets-or-starting-2-ending-7-when-progression-did-not-reach-7",
      "title": "Fix Accepting Gifts saved session summary and completion status: when the session is saved, the saved record must store Starting ball count, Ending ball count (the current ball count at session end), Total attempts, Sets completed, Final set score (Me vs Ghost for the last set played), and Status=Completed; Match History and Match Details must display \"Completed\" and must never show impossible session details (e.g., \"Final Set Score 0–1\", wildly inflated attempts/sets, or \"Starting 2 → Ending 7\" when progression did not reach 7).",
      "reqIds": [
        "REQ-185"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-app-s-login-connection-delay-by-removing-avoidable-frontend-deadlocks-and-excessive-refetch-invalidation-related-to-actor-initialization-the-app-must-become-usable-promptly-after-login-not-5-10-minutes-and-background-actor-refetching-must-not-trigger-repeated-invalidation-refetch-of-all-queries-in-a-way-that-stalls-the-ui",
      "title": "Fix the app’s login/connection delay by removing avoidable frontend deadlocks and excessive refetch/invalidation related to actor initialization: the app must become usable promptly after login (not 5–10 minutes), and background actor refetching must not trigger repeated invalidation/refetch of all queries in a way that stalls the UI.",
      "reqIds": [
        "REQ-186"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-apa-match-results-chart-rendering-so-it-plots-three-series-as-lines-your-points-opponent-points-and-defensive-shots-legend-labels-and-symbols-must-match-the-plotted-series-no-missing-lines-and-no-mismatched-legend",
      "title": "Fix APA Match Results chart rendering so it plots three series as lines: Your Points, Opponent Points, and Defensive Shots; legend labels and symbols must match the plotted series (no missing lines and no mismatched legend).",
      "reqIds": [
        "REQ-187"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-apa-ppi-trend-chart-so-it-is-not-blank-and-plots-both-ppi-and-adjusted-ppi-appi-as-separate-lines-with-a-correct-legend",
      "title": "Fix APA PPI Trend chart so it is not blank and plots both PPI and Adjusted PPI (aPPI) as separate lines with a correct legend.",
      "reqIds": [
        "REQ-188"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-apa-chart-x-axis-dates-match-results-and-ppi-trend-use-actual-match-dates-effective-match-dates-rather-than-record-timestamps-and-the-displayed-date-aligns-with-the-sorting-date-logic-used-elsewhere-in-the-app",
      "title": "Ensure APA chart x-axis dates (Match Results and PPI Trend) use actual match dates (effective match dates) rather than record timestamps, and the displayed date aligns with the sorting/date logic used elsewhere in the app.",
      "reqIds": [
        "REQ-189"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-straight-shot-trend-visualization-on-the-stats-page-so-it-is-not-empty-and-uses-a-bar-chart-for-shot-count-with-a-line-overlay-trend-using-saved-straight-shot-session-data",
      "title": "Implement Straight Shot Trend visualization on the Stats page so it is not empty and uses a bar chart for shot count with a line overlay trend, using saved Straight Shot session data.",
      "reqIds": [
        "REQ-190"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-straight-shot-histogram-visualization-shot-count-on-x-axis-frequency-on-y-axis-using-saved-straight-shot-sessions",
      "title": "Add a Straight Shot histogram visualization (shot count on x-axis, frequency on y-axis) using saved Straight Shot sessions.",
      "reqIds": [
        "REQ-191"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-match-history-table-view-that-includes-all-match-types-apa-match-apa-practice-accepting-gifts-straight-shot-and-uses-the-required-column-order-date-first-match-results-ppi-adjusted-ppi-rolling-10-20-apa-10-20-wins-losses-win-apa-rows-must-include-your-points-opponent-points-defensive-shots-apa-match-vs-apa-practice-must-be-distinguished-via-a-drill-type-tag-label-drill-modes-must-display-for-non-applicable-columns",
      "title": "Add a Match History table view that includes all match types (APA Match, APA Practice, Accepting Gifts, Straight Shot) and uses the required column order: Date (first) → Match Results → PPI → Adjusted PPI → Rolling 10/20 → APA 10/20 → Wins/Losses → Win %. APA rows must include Your points, Opponent points, Defensive shots; APA Match vs APA Practice must be distinguished via a Drill Type tag/label; drill modes must display “—” for non-applicable columns.",
      "reqIds": [
        "REQ-192"
      ],
      "version": 1
    },
    {
      "id": "feature-format-the-match-results-column-text-in-the-match-history-table-to-follow-the-specified-english-pattern-for-apa-rows-e-g-won-vs-jesse-total-innings-38-def-shots-0-opponent-37-46-you-31-31-ensure-the-opponent-a-b-and-you-c-d-formatting-uses-the-appropriate-out-of-targets-when-available-when-innings-defensive-shots-are-unknown-use-as-shown-in-the-example",
      "title": "Format the Match Results column text in the Match History table to follow the specified English pattern for APA rows, e.g.: “Won vs Jesse | Total innings 38 | Def shots 0 | Opponent 37/46 | You 31/31”. Ensure the \"Opponent A/B\" and \"You C/D\" formatting uses the appropriate “out of” targets when available; when innings/defensive shots are unknown, use “?” as shown in the example.",
      "reqIds": [
        "REQ-193"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-new-straight-shot-summary-table-with-columns-balls-wins-losses-first-win-on-or-use-saved-straight-shot-history-to-compute-these-values-and-display-them-in-english",
      "title": "Add a new Straight Shot summary table with columns: Balls | Wins | Losses | First Win On (or “—”). Use saved Straight Shot history to compute these values and display them in English.",
      "reqIds": [
        "REQ-194"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-home-page-mode-order-to-match-the-intended-correct-ordering-and-ensure-the-ordering-remains-stable-across-reloads-and-deployments",
      "title": "Fix the Home page mode order to match the intended correct ordering and ensure the ordering remains stable across reloads and deployments.",
      "reqIds": [
        "REQ-195"
      ],
      "version": 1
    },
    {
      "id": "feature-bundle-general-ui-polish-and-layout-cleanup-for-the-changed-areas-in-this-build-accepting-gifts-gameplay-saved-details-stats-charts-sections-match-history-table-view-and-home-mode-grid-improving-spacing-alignment-and-readability-without-changing-core-workflows-beyond-the-requirements-above",
      "title": "Bundle general UI polish and layout cleanup for the changed areas in this build (Accepting Gifts gameplay + saved details, Stats charts sections, Match History table view, and Home mode grid), improving spacing, alignment, and readability without changing core workflows beyond the requirements above.",
      "reqIds": [
        "REQ-196"
      ],
      "version": 1
    },
    {
      "id": "feature-on-the-stats-page-straight-shot-tab-aggregate-stats-view-remove-the-lifetime-last-20-dropdown-menu-entirely-no-menu-no-selection-ui-keep-showing-the-last-20-average-as-the-primary-large-value-and-add-a-secondary-line-directly-underneath-it-that-reads-exactly-lifetime-x-x-where-x-x-is-the-computed-lifetime-shot-average-the-lifetime-line-must-use-the-same-smaller-muted-font-styling-used-for-the-date-text-under-lowest-shot-count-as-in-the-uploaded-reference-this-change-must-apply-only-to-the-stats-page-straight-shot-tab-and-must-not-modify-straight-shot-gameplay-history-rendering-or-any-other-screens",
      "title": "On the Stats page Straight Shot tab (aggregate/stats view), remove the Lifetime/Last-20 dropdown menu entirely (no menu, no selection UI). Keep showing the Last 20 Average as the primary large value, and add a secondary line directly underneath it that reads exactly: \"Lifetime: X.X\" (where X.X is the computed lifetime shot average). The \"Lifetime: …\" line must use the same smaller muted font styling used for the date text under \"Lowest Shot Count\" (as in the uploaded reference). This change must apply only to the Stats page Straight Shot tab (and must not modify Straight Shot gameplay, history rendering, or any other screens).",
      "reqIds": [
        "REQ-197"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-performance-by-ball-count-summary-concept-is-treated-as-an-accepting-gifts-only-summary-wins-losses-per-object-ball-level-2-7-derived-from-saved-completed-accepting-gifts-set-outcomes-and-is-not-shown-or-labeled-as-a-straight-shot-stat-update-any-existing-ui-copy-components-so-straight-shot-summary-content-remains-straight-shot-specific-and-accepting-gifts-summary-content-is-accepting-gifts-specific-with-all-user-facing-text-in-english",
      "title": "Ensure the \"Performance by Ball Count\" summary concept is treated as an Accepting Gifts-only summary (wins/losses per object-ball level 2–7 derived from saved completed Accepting Gifts set outcomes), and is not shown or labeled as a Straight Shot stat. Update any existing UI copy/components so Straight Shot summary content remains Straight Shot-specific, and Accepting Gifts summary content is Accepting Gifts-specific, with all user-facing text in English.",
      "reqIds": [
        "REQ-198"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-an-official-apa-appi-adjusted-applied-ppi-value-and-ensure-it-is-available-wherever-official-apa-match-metrics-are-rendered-using-only-existing-lookup-table-logic-if-it-already-exists-in-the-current-codebase-otherwise-fall-back-to-appi-ppi-for-both-wins-and-losses-no-new-tables-no-hardcoded-values-no-placeholders",
      "title": "Implement an Official APA aPPI (Adjusted/Applied PPI) value and ensure it is available wherever Official APA match metrics are rendered, using only existing lookup-table logic if it already exists in the current codebase; otherwise fall back to aPPI = PPI for both wins and losses (no new tables, no hardcoded values, no placeholders).",
      "reqIds": [
        "REQ-199"
      ],
      "version": 1
    },
    {
      "id": "feature-update-official-apa-match-details-rendering-to-show-an-appi-line-directly-under-the-existing-ppi-line-in-the-official-apa-section-english-label-exactly-appi-showing-a-numeric-value-when-computable-and-showing-when-not-available",
      "title": "Update Official APA Match Details rendering to show an aPPI line directly under the existing PPI line in the Official APA section (English label exactly: \"aPPI:\"), showing a numeric value when computable and showing \"—\" when not available.",
      "reqIds": [
        "REQ-200"
      ],
      "version": 1
    },
    {
      "id": "feature-populate-match-history-table-derived-columns-for-apa-matches-at-minimum-for-official-apa-match-logs-so-that-ppi-appi-rolling-10-20-apa-10-20-wins-losses-and-win-are-not-rendered-as-when-sufficient-data-exists",
      "title": "Populate Match History Table derived columns for APA matches (at minimum for Official APA match logs), so that PPI, aPPI, Rolling 10/20, APA 10/20, Wins/Losses, and Win % are not rendered as \"—\" when sufficient data exists.",
      "reqIds": [
        "REQ-201"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-official-apa-win-computation-to-use-the-last-20-official-apa-matches-or-fewer-if-20-exist-ordered-by-effective-match-date-not-a-smaller-window-e-g-not-last-10",
      "title": "Fix Official APA win% computation to use the last 20 Official APA matches (or fewer if <20 exist), ordered by effective match date, not a smaller window (e.g., not last-10).",
      "reqIds": [
        "REQ-202"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-user-provided-official-apa-expected-ppi-lookup-table-win-bucket-skill-level-in-the-frontend-codebase-using-the-uploaded-table-image-as-the-authoritative-source-of-values",
      "title": "Implement the user-provided Official APA Expected PPI lookup table (win% bucket × skill level) in the frontend codebase, using the uploaded table image as the authoritative source of values.",
      "reqIds": [
        "REQ-203"
      ],
      "version": 1
    },
    {
      "id": "feature-compute-official-apa-match-log-appi-adjusted-applied-ppi-using-the-table-and-the-correct-win-loss-rules-for-wins-appi-max-ppi-expectedppifromtable-for-losses-appi-ppi",
      "title": "Compute Official APA match-log aPPI (Adjusted/Applied PPI) using the table and the correct win/loss rules: for wins, aPPI = max(PPI, expectedPpiFromTable); for losses, aPPI = PPI.",
      "reqIds": [
        "REQ-204"
      ],
      "version": 1
    },
    {
      "id": "feature-define-and-implement-the-official-apa-win-used-for-appi-lookup-as-the-win-percentage-from-the-last-up-to-20-official-apa-matches-with-effective-match-date-the-current-match-s-effective-match-date-inclusive-counting-only-matches-with-known-outcomes-win-loss-in-the-denominator",
      "title": "Define and implement the Official APA win% used for aPPI lookup as: the win percentage from the last up-to-20 Official APA matches with effective match date <= the current match’s effective match date (inclusive), counting only matches with known outcomes (win/loss) in the denominator.",
      "reqIds": [
        "REQ-205"
      ],
      "version": 1
    },
    {
      "id": "feature-update-official-apa-appi-computations-everywhere-they-are-currently-derived-from-computeofficialapaappi-so-they-use-the-new-match-context-aware-appi-calculation-including-at-minimum-the-match-history-table-s-adjusted-ppi-column-and-any-official-apa-stats-calculations-that-use-computeofficialapaappi",
      "title": "Update Official APA aPPI computations everywhere they are currently derived from computeOfficialApaAppi so they use the new match-context-aware aPPI calculation, including (at minimum) the Match History Table’s “Adjusted PPI” column and any Official APA stats calculations that use computeOfficialApaAppi.",
      "reqIds": [
        "REQ-206"
      ],
      "version": 1
    },
    {
      "id": "feature-update-predicted-skill-level-from-appi-logic-so-it-uses-the-table-s-expected-ppi-column-ranges-as-shown-in-the-uploaded-table-header-for-predicting-skill-levels-from-appi-averages-and-ensure-the-per-player-aggregate-stats-page-continues-to-show-both-average-ppi-and-average-appi-with-their-predicted-skill-levels",
      "title": "Update predicted-skill-level-from-aPPI logic so it uses the table’s Expected PPI column ranges (as shown in the uploaded table header) for predicting skill levels from aPPI averages, and ensure the per-player Aggregate Stats page continues to show both Average PPI and Average aPPI with their predicted skill levels.",
      "reqIds": [
        "REQ-207"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-official-real-apa-match-log-appi-computation-so-appi-can-still-be-computed-and-displayed-for-wins-even-when-raw-ppi-is-unavailable-due-to-missing-invalid-innings-defensive-shot-inputs-specifically-when-the-match-outcome-is-a-win-and-an-expected-ppi-can-be-looked-up-from-the-existing-expected-ppi-table-using-skill-level-contextual-win-calculation-return-a-valid-appi-value-based-on-expected-ppi-even-if-computeofficialapappi-returns-invalid-null-do-not-require-raw-ppi-to-exist-for-this-win-only-appi-fallback-keep-loss-unknown-behavior-unchanged-if-ppi-cannot-be-computed-for-a-loss-unknown-appi-remains-unavailable",
      "title": "Fix Official/Real APA Match Log aPPI computation so aPPI can still be computed and displayed for wins even when raw PPI is unavailable due to missing/invalid innings/defensive-shot inputs. Specifically: when the match outcome is a win and an expected PPI can be looked up from the existing expected-PPI table (using skill level + contextual win% calculation), return a valid aPPI value based on expected PPI even if `computeOfficialApaPpi(...)` returns invalid/null; do not require raw PPI to exist for this win-only aPPI fallback. Keep loss/unknown behavior unchanged (if PPI cannot be computed for a loss/unknown, aPPI remains unavailable).",
      "reqIds": [
        "REQ-208"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-apa-ppi-trend-chart-official-apa-tab-so-it-is-not-blank-by-ensuring-the-chart-receives-a-clean-numeric-dataset-before-passing-data-to-recharts-coerce-compute-numeric-ppi-and-appi-values-and-exclude-any-rows-that-do-not-have-at-least-one-valid-numeric-value-for-the-plotted-series-the-chart-must-plot-exactly-two-lines-labeled-in-english-as-ppi-and-appi-and-the-x-axis-must-remain-based-on-effective-match-date",
      "title": "Fix the APA PPI Trend chart (Official APA tab) so it is not blank by ensuring the chart receives a clean numeric dataset. Before passing data to Recharts, coerce/compute numeric PPI and aPPI values and exclude any rows that do not have at least one valid numeric value for the plotted series. The chart must plot exactly two lines labeled in English as “PPI” and “aPPI”, and the x-axis must remain based on effective match date.",
      "reqIds": [
        "REQ-209"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-apa-match-results-chart-official-apa-tab-so-it-is-not-blank-by-building-a-clean-numeric-dataset-for-recharts-ensure-your-points-opponent-points-and-defensive-shots-are-numeric-for-chart-rows-convert-from-strings-when-needed-and-exclude-rows-that-cannot-provide-valid-numeric-values-for-all-required-series-the-chart-must-plot-exactly-three-lines-labeled-in-english-as-your-points-opponent-points-and-defensive-shots-with-match-date-on-the-x-axis",
      "title": "Fix the APA Match Results chart (Official APA tab) so it is not blank by building a clean numeric dataset for Recharts. Ensure “Your Points”, “Opponent Points”, and “Defensive Shots” are numeric for chart rows (convert from strings when needed) and exclude rows that cannot provide valid numeric values for all required series. The chart must plot exactly three lines labeled in English as “Your Points”, “Opponent Points”, and “Defensive Shots”, with match date on the x-axis.",
      "reqIds": [
        "REQ-210"
      ],
      "version": 1
    },
    {
      "id": "feature-remove-the-straight-shot-summary-box-table-from-the-stats-straight-shot-tab-so-it-is-no-longer-displayed-do-not-remove-or-modify-the-straight-shot-trend-chart-histogram-or-top-level-summary-metrics-total-sessions-last-20-average-with-lifetime-line-lowest-shot-count",
      "title": "Remove the Straight Shot Summary box/table from the Stats → Straight Shot tab so it is no longer displayed. Do not remove or modify the Straight Shot Trend chart, histogram, or top-level summary metrics (Total Sessions, Last 20 Average with Lifetime line, Lowest Shot Count).",
      "reqIds": [
        "REQ-211"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-lib-apa-apaaggregatestats-ts-extractplayerapamatches-so-official-real-apa-match-log-datapoints-always-output-clean-numeric-values-or-null-for-fields-consumed-by-charts-ppi-appi-yourpoints-opponentpoints-defensiveshots-do-not-change-the-underlying-appi-ppi-math-only-prevent-valid-computed-numbers-from-being-discarded-due-to-overly-strict-validity-checks-or-string-parsing-issues",
      "title": "Update `frontend/src/lib/apa/apaAggregateStats.ts` `extractPlayerApaMatches(...)` so Official/Real APA Match Log datapoints always output clean numeric values (or null) for fields consumed by charts: `ppi`, `appi`, `yourPoints`, `opponentPoints`, `defensiveShots`. Do not change the underlying aPPI/PPI math; only prevent valid computed numbers from being discarded due to overly-strict validity checks or string parsing issues.",
      "reqIds": [
        "REQ-212"
      ],
      "version": 1
    },
    {
      "id": "feature-harden-frontend-src-components-players-apaaggregatecharts-tsx-so-the-official-apa-tab-charts-never-receive-an-empty-invalid-dataset-due-to-type-issues-build-a-clean-numeric-dataset-for-recharts-by-coercing-values-to-numbers-and-filtering-out-rows-that-do-not-contain-at-least-one-numeric-value-for-the-plotted-series-preserve-existing-chart-structure-ppi-trend-plots-exactly-two-lines-labeled-ppi-and-appi-match-results-plots-exactly-three-lines-labeled-your-points-opponent-points-defensive-shots-x-axis-remains-based-on-effective-match-date",
      "title": "Harden `frontend/src/components/players/ApaAggregateCharts.tsx` so the Official APA tab charts never receive an empty/invalid dataset due to type issues: build a clean numeric dataset for Recharts by coercing values to numbers and filtering out rows that do not contain at least one numeric value for the plotted series. Preserve existing chart structure: PPI Trend plots exactly two lines labeled \"PPI\" and \"aPPI\"; Match Results plots exactly three lines labeled \"Your Points\", \"Opponent Points\", \"Defensive Shots\"; x-axis remains based on effective match date.",
      "reqIds": [
        "REQ-213"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-stats-official-apa-tab-chart-rendering-so-the-ppi-trend-chart-always-renders-when-any-official-apa-datapoints-contain-a-valid-numeric-ppi-or-appi-value-by-generating-two-separate-chart-datasets-1-a-ppi-only-dataset-containing-only-matches-with-numeric-ppi-and-2-an-appi-only-dataset-containing-only-matches-with-numeric-appi-do-not-allow-missing-values-in-one-series-to-suppress-rendering-of-the-other-series",
      "title": "Update the Stats → Official APA tab chart rendering so the PPI Trend chart always renders when any Official/APA datapoints contain a valid numeric PPI or aPPI value by generating two separate chart datasets: (1) a PPI-only dataset containing only matches with numeric PPI, and (2) an aPPI-only dataset containing only matches with numeric aPPI. Do not allow missing values in one series to suppress rendering of the other series.",
      "reqIds": [
        "REQ-215"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-stats-official-apa-tab-match-results-chart-rendering-so-each-plotted-series-is-built-from-its-own-filtered-dataset-1-your-points-only-dataset-2-opponent-points-only-dataset-and-3-defensive-shots-only-dataset-do-not-allow-missing-values-in-any-one-series-to-suppress-rendering-of-the-other-series",
      "title": "Update the Stats → Official APA tab Match Results chart rendering so each plotted series is built from its own filtered dataset: (1) Your Points-only dataset, (2) Opponent Points-only dataset, and (3) Defensive Shots-only dataset. Do not allow missing values in any one series to suppress rendering of the other series.",
      "reqIds": [
        "REQ-216"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-both-official-apa-charts-display-a-visible-legend-with-exactly-these-english-labels-for-the-plotted-lines-ppi-appi-your-points-opponent-points-defensive-shots",
      "title": "Ensure both Official APA charts display a visible legend with exactly these English labels for the plotted lines: PPI, aPPI, Your Points, Opponent Points, Defensive Shots.",
      "reqIds": [
        "REQ-217"
      ],
      "version": 1
    },
    {
      "id": "feature-update-extractplayerapamatches-in-frontend-src-lib-apa-apaaggregatestats-ts-so-that-it-independently-cleans-the-five-chart-consumed-fields-ppi-appi-yourpoints-opponentpoints-defensiveshots-per-match-without-dropping-the-entire-row-when-one-field-is-invalid-for-each-match-coerce-each-field-to-a-clean-number-when-possible-otherwise-set-only-that-field-to-null-do-not-mutate-the-raw-apimatch-objects-and-do-not-change-any-ppi-appi-math",
      "title": "Update `extractPlayerApaMatches(...)` in `frontend/src/lib/apa/apaAggregateStats.ts` so that it independently cleans the five chart-consumed fields (`ppi`, `appi`, `yourPoints`, `opponentPoints`, `defensiveShots`) per match without dropping the entire row when one field is invalid. For each match, coerce each field to a clean `number` when possible; otherwise set only that field to `null`. Do not mutate the raw `ApiMatch` objects and do not change any PPI/aPPI math.",
      "reqIds": [
        "REQ-219"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-components-players-apaaggregatecharts-tsx-so-that-it-builds-and-renders-five-fully-independent-chart-series-arrays-ppiseries-appiseries-yourpointsseries-opponentpointsseries-defensiveshotsseries-where-each-series-contains-only-entries-that-have-1-a-valid-effective-match-date-for-the-x-axis-and-2-a-valid-numeric-value-for-that-specific-series-the-ppi-trend-chart-must-render-ppi-and-appi-as-two-separate-line-series-that-do-not-suppress-each-other-the-match-results-chart-must-render-your-points-opponent-points-and-defensive-shots-as-three-separate-line-series-that-do-not-suppress-each-other",
      "title": "Update `frontend/src/components/players/ApaAggregateCharts.tsx` so that it builds and renders five fully independent chart series arrays—`ppiSeries`, `appiSeries`, `yourPointsSeries`, `opponentPointsSeries`, `defensiveShotsSeries`—where each series contains only entries that have (1) a valid effective match date for the x-axis and (2) a valid numeric value for that specific series. The PPI Trend chart must render PPI and aPPI as two separate line series that do not suppress each other; the Match Results chart must render Your Points, Opponent Points, and Defensive Shots as three separate line series that do not suppress each other.",
      "reqIds": [
        "REQ-220"
      ],
      "version": 1
    },
    {
      "id": "feature-keep-this-build-tightly-scoped-to-the-official-apa-stats-chart-pipeline-by-modifying-only-these-two-files-frontend-src-lib-apa-apaaggregatestats-ts-and-frontend-src-components-players-apaaggregatecharts-tsx-do-not-change-match-history-code-routing-or-any-other-components-pages",
      "title": "Keep this build tightly scoped to the Official APA stats/chart pipeline by modifying only these two files: `frontend/src/lib/apa/apaAggregateStats.ts` and `frontend/src/components/players/ApaAggregateCharts.tsx`. Do not change Match History code, routing, or any other components/pages.",
      "reqIds": [
        "REQ-221"
      ],
      "version": 1
    },
    {
      "id": "feature-replace-the-current-accepting-gifts-drill-progression-model-2-7-object-ball-progression-with-hard-coded-runout-3-with-a-fixed-12-level-ordered-progression-sequence-index-0-11-used-everywhere-accepting-gifts-determines-rules-progression-2-8-3-8-2-9-3-9-4-8-4-9-5-8-5-9-6-8-6-9-7-8-7-9",
      "title": "Replace the current Accepting Gifts drill progression model (2–7 object-ball progression with hard-coded runout=3) with a fixed 12-level ordered progression sequence (index 0–11) used everywhere Accepting Gifts determines rules/progression: 2+8, 3+8, 2+9, 3+9, 4+8, 4+9, 5+8, 5+9, 6+8, 6+9, 7+8, 7+9.",
      "reqIds": [
        "REQ-222"
      ],
      "version": 1
    },
    {
      "id": "feature-update-accepting-gifts-start-screen-frontend-src-pages-accepting-gifts-acceptinggiftsstartpage-tsx-to-select-a-level-from-the-12-level-sequence-and-persist-the-chosen-level-into-the-in-progress-session-state-as-levelplayed-while-also-recording-baselinelevel-as-the-current-saved-baseline-level-at-the-moment-the-match-starts",
      "title": "Update Accepting Gifts Start screen (frontend/src/pages/accepting-gifts/AcceptingGiftsStartPage.tsx) to select a level from the 12-level sequence and persist the chosen level into the in-progress session state as levelPlayed, while also recording baselineLevel as the current saved baseline level at the moment the match starts.",
      "reqIds": [
        "REQ-223"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-new-per-level-attempt-input-rules-on-the-accepting-gifts-game-screen-frontend-src-pages-accepting-gifts-acceptinggiftsgamepage-tsx-the-attempt-input-must-allow-integer-values-from-0-up-to-objectballcount-1-based-on-the-selected-level-and-must-update-dynamically-if-the-level-changes-2-8-2-9-0-3-3-8-3-9-0-4-7-8-7-9-0-8",
      "title": "Implement new per-level attempt input rules on the Accepting Gifts Game screen (frontend/src/pages/accepting-gifts/AcceptingGiftsGamePage.tsx): the attempt input must allow integer values from 0 up to (objectBallCount + 1) based on the selected level, and must update dynamically if the level changes (2+8/2+9 → 0–3, 3+8/3+9 → 0–4, …, 7+8/7+9 → 0–8).",
      "reqIds": [
        "REQ-224"
      ],
      "version": 1
    },
    {
      "id": "feature-replace-accepting-gifts-win-loss-attempt-logic-so-it-no-longer-treats-ballscleared-3-as-a-universal-win-instead-a-player-wins-the-attempt-earns-1-point-only-when-the-attempt-input-equals-the-maximum-value-for-the-current-level-objectballcount-1-otherwise-the-ghost-earns-1-point-update-the-shared-helpers-in-frontend-src-lib-accepting-gifts-acceptinggiftssession-ts-accordingly-and-ensure-acceptinggiftsgamepage-uses-the-updated-helper-s",
      "title": "Replace Accepting Gifts win/loss attempt logic so it no longer treats ballsCleared===3 as a universal win. Instead, a player wins the attempt (earns 1 point) only when the attempt input equals the maximum value for the current level (objectBallCount + 1); otherwise the ghost earns 1 point. Update the shared helpers in frontend/src/lib/accepting-gifts/acceptingGiftsSession.ts accordingly and ensure AcceptingGiftsGamePage uses the updated helper(s).",
      "reqIds": [
        "REQ-225"
      ],
      "version": 1
    },
    {
      "id": "feature-replace-accepting-gifts-progression-persistence-from-current-object-ball-count-to-a-baseline-level-index-0-11-persisted-per-authenticated-user-on-the-backend-and-update-the-existing-react-query-hooks-currently-named-usegetcurrentobjectballcount-usesetcurrentobjectballcount-to-use-new-backend-apis-that-get-set-the-baseline-accepting-gifts-level-index-keep-behavior-consistent-with-existing-persistence-expectations-restored-after-logout-login-and-reload",
      "title": "Replace Accepting Gifts progression persistence from ‘current object ball count’ to a ‘baseline level index’ (0–11) persisted per authenticated user on the backend, and update the existing React Query hooks currently named useGetCurrentObjectBallCount/useSetCurrentObjectBallCount to use new backend APIs that get/set the baseline Accepting Gifts level index. Keep behavior consistent with existing persistence expectations (restored after logout/login and reload).",
      "reqIds": [
        "REQ-226"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-accepting-gifts-end-of-match-baseline-progression-rules-when-the-user-ends-a-session-save-keep-race-to-7-set-logic-unchanged-but-update-the-stored-baseline-level-after-the-final-set-outcome-using-1-on-win-baseline-moves-up-exactly-1-level-in-the-fixed-sequence-2-on-loss-if-levelplayed-baselinelevel-at-match-start-then-baseline-remains-unchanged-if-levelplayed-baselinelevel-at-match-start-then-baseline-moves-down-exactly-1-level-this-logic-must-use-the-fixed-12-level-ordering-and-must-clamp-to-the-bounds-0-11",
      "title": "Implement the Accepting Gifts end-of-match baseline progression rules when the user ends a session (save): keep race-to-7 set logic unchanged, but update the stored baseline level after the final set outcome using: (1) on WIN → baseline moves up exactly 1 level in the fixed sequence; (2) on LOSS → if levelPlayed > baselineLevel at match start then baseline remains unchanged; if levelPlayed == baselineLevel at match start then baseline moves down exactly 1 level. This logic must use the fixed 12-level ordering and must clamp to the bounds (0..11).",
      "reqIds": [
        "REQ-227"
      ],
      "version": 1
    },
    {
      "id": "feature-update-accepting-gifts-post-set-completion-ui-in-frontend-src-pages-accepting-gifts-acceptinggiftsgamepage-tsx-to-provide-three-explicit-actions-after-the-current-set-completes-7-x-or-x-7-save-start-next-match-save-exit-and-exit-without-saving-exit-without-saving-must-clear-sessionstorage-session-keys-accepting-gifts-and-not-call-any-save-update-mutations-saving-must-persist-the-match-and-update-the-stored-baseline-level-per-req-227",
      "title": "Update Accepting Gifts post-set completion UI in frontend/src/pages/accepting-gifts/AcceptingGiftsGamePage.tsx to provide three explicit actions after the current set completes (7–X or X–7): “Save & Start Next Match”, “Save & Exit”, and “Exit Without Saving”. “Exit Without Saving” must clear sessionStorage[SESSION_KEYS.ACCEPTING_GIFTS] and not call any save/update mutations. Saving must persist the match and update the stored baseline level per REQ-227.",
      "reqIds": [
        "REQ-228"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-each-saved-accepting-gifts-match-includes-a-match-history-note-string-containing-levelplayed-baselinelevel-and-final-set-score-and-render-it-in-the-match-history-table-match-results-note-area-in-this-exact-format-level-played-baseline-level-7-4-example-3-9-3-9-7-4-implement-this-by-setting-the-saved-match-base-notes-to-include-this-summary-and-update-frontend-src-lib-history-matchhistoryrowmodel-ts-to-display-this-summary-for-accepting-gifts",
      "title": "Ensure each saved Accepting Gifts match includes a Match History note string containing levelPlayed, baselineLevel, and final set score, and render it in the Match History table “Match Results”/note area in this exact format: “LEVEL_PLAYED | BASELINE_LEVEL | 7-4” (example: “3+9 | 3+9 | 7-4”). Implement this by setting the saved match base.notes to include this summary (and update frontend/src/lib/history/matchHistoryRowModel.ts to display this summary for Accepting Gifts).",
      "reqIds": [
        "REQ-229"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-src-components-players-apaaggregatecharts-tsx-so-the-official-apa-charts-render-using-five-fully-independent-series-arrays-ppiseries-appiseries-yourpointsseries-opponentpointsseries-defensiveshotsseries-each-series-must-include-only-entries-with-1-a-valid-x-axis-date-derived-from-the-datapoint-timestamp-and-2-a-valid-numeric-value-for-that-series-render-each-series-as-its-own-line-so-missing-values-in-one-metric-never-suppress-rendering-of-another-metric-preserve-existing-english-labels-and-overall-chart-sections-ppi-appi-trend-match-results",
      "title": "Update `frontend/src/components/players/ApaAggregateCharts.tsx` so the Official APA charts render using five fully independent series arrays (`ppiSeries`, `appiSeries`, `yourPointsSeries`, `opponentPointsSeries`, `defensiveShotsSeries`). Each series must include only entries with (1) a valid x-axis date derived from the datapoint timestamp and (2) a valid numeric value for that series. Render each series as its own `<Line>` so missing values in one metric never suppress rendering of another metric. Preserve existing English labels and overall chart sections (PPI & aPPI Trend; Match Results).",
      "reqIds": [
        "REQ-232"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-official-apa-performance-charts-so-they-render-reliably-not-blank-by-removing-the-current-merged-datemap-single-dataset-approach-in-frontend-src-components-players-apaaggregatecharts-tsx-and-instead-building-five-fully-independent-per-series-datasets-ppiseries-appiseries-yourpointsseries-opponentpointsseries-defensiveshotsseries-each-series-must-include-only-entries-that-have-1-a-valid-x-axis-date-derived-from-the-datapoint-timestamp-and-2-a-valid-numeric-value-for-that-specific-series-render-each-series-as-its-own-line-such-that-missing-invalid-values-for-one-metric-never-suppress-the-other-lines-preserve-the-existing-chart-sections-and-english-legend-labels-ppi-appi-your-points-opponent-points-defensive-shots",
      "title": "Fix the Official APA Performance Charts so they render reliably (not blank) by removing the current merged `dateMap`/single-dataset approach in `frontend/src/components/players/ApaAggregateCharts.tsx` and instead building five fully independent per-series datasets (`ppiSeries`, `appiSeries`, `yourPointsSeries`, `opponentPointsSeries`, `defensiveShotsSeries`). Each series must include only entries that have (1) a valid x-axis date derived from the datapoint timestamp and (2) a valid numeric value for that specific series. Render each series as its own `<Line>` such that missing/invalid values for one metric never suppress the other lines. Preserve the existing chart sections and English legend labels: PPI, aPPI, Your Points, Opponent Points, Defensive Shots.",
      "reqIds": [
        "REQ-233"
      ],
      "version": 1
    },
    {
      "id": "feature-add-console-only-debug-taps-in-frontend-src-components-players-apaaggregatecharts-tsx-immediately-before-the-data-is-fed-into-each-line-so-it-is-possible-to-see-the-exact-per-series-arrays-being-passed-to-recharts-keep-any-existing-debug-tap-s-earlier-in-the-pipeline-e-g-in-frontend-src-lib-apa-apaaggregatestats-ts-unchanged-and-do-not-add-any-on-screen-debug-ui",
      "title": "Add console-only debug taps in `frontend/src/components/players/ApaAggregateCharts.tsx` immediately before the data is fed into each `<Line>` so it is possible to see the exact per-series arrays being passed to Recharts. Keep any existing debug tap(s) earlier in the pipeline (e.g., in `frontend/src/lib/apa/apaAggregateStats.ts`) unchanged, and do not add any on-screen debug UI.",
      "reqIds": [
        "REQ-234"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Create an APA-style pool scorekeeper app to track practice games similar to the official APA Scorekeeper app.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Add an additional scoring/match-tracking mode for the 'Accepting Gifts' pool game.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Add an additional scoring/match-tracking mode for the 'Straight Shot' pool game.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Implement backend persistence for practice games and match history, supporting all three modes with a unified data model that stores: mode, date/time, players (names), optional notes, and a mode-specific scoring payload.",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Update Straight Shot (drill) mode rules and tracking: count strokes with win condition <=20; pocket all balls with 8-ball last; scratches add +2 shots (break shot doesn’t count; clarify scratch-on-break handling); track and display moving average of strokes over time; ensure naming/description doesn’t imply 'straight pool'.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Correct APA mode to be APA 9-ball Equalizer scoring (points-to-win by skill level), including per-rack 10-point accounting (balls + dead balls), defensive shots, innings, PPI calculation, and 20-point match-point conversion (12–20 winner / 0–8 loser). Remove any 'race to X' UI/logic.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Improve APA 9-ball scoring UI to a seamless, APA-scorekeeper-like per-inning GUI: display balls 1–9 each rack, allow selecting pocketed balls per inning, provide a Turn Over button to alternate turns, auto-adjust innings, and support marking dead balls and defensive shots during entry.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Accepting Gifts: persist and carry forward the current object-ball count across sessions (including mid-session resume) so new sessions default to where the user left off; allow user to optionally reset/override the starting ball count; enforce minimum of 2 balls.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Add primary player profile selection (per device/account) to auto-remember the main user name and auto-fill it in new matches; support optional opponent name persistence.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Add aggregated player stats and graphs in Results: per-player aggregate view with (1) PPI trend line plus rolling best-10-of-last-20 average line; (2) match-by-match results plotted with rolling best-10-of-last-20 average line; include a button from individual match results to the aggregate player view.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Persist and auto-fill the Primary Player’s APA skill level (SL) from the user profile so new APA matches automatically load the saved SL instead of requiring re-entry each match.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Extend the backend user profile to store the primary player’s APA 9-ball skill level, and return/save it via the existing profile APIs.\n\nContext: backend/main.mo currently defines `public type UserProfile = { name : Text; };` and profile is saved via `saveCallerUserProfile` / fetched via `getCallerUserProfile`.\n\nAdd a new optional field (e.g., `apaSkillLevel : ?Nat`) so existing users who only have a name saved remain valid.",
      "reqIds": [
        "REQ-38"
      ],
      "status": "pending"
    },
    {
      "id": "AR-14",
      "summary": "APA match setup: prevent using the Primary Player (main profile name) in both Player 1 and Player 2 (no playing yourself); block match start or show validation error if duplicated, and ensure the Primary Player’s saved APA skill level auto-loads into whichever slot (P1 or P2) contains that name; if the user manually edits SL for the match, respect the override but re-auto-load when the name field changes to/from the Primary Player.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-15",
      "summary": "Add optional invite-only access control using an allowlist of approved Internet Identity principals; non-approved users see an 'Access not allowed' screen; support switching back to public access later.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-16",
      "summary": "Add an Owner Approval admin screen linked to the app owner's identity: capture login attempts into a pending list, allow Approve/Reject per principal, and include a one-click 'Reject All Pending' action for spam bursts.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Add backend support to record and manage access requests: when a non-approved signed-in principal attempts to use the app, capture them into a pending requests list that the owner can review.",
      "reqIds": [
        "REQ-45"
      ],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Add a discrete 4th mode for logging real APA 9-ball matches (not drills): manual match entry including date/opponent/notes and key stats (points, innings, defensive shots, etc.), and display charts for both actual PPI and adjusted PPI, each with a rolling “best 10 of last 20” line.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-20",
      "summary": "Provide a way to run the app in a working public/no-approval mode by disabling or bypassing the invite-only approval/login gate (at least temporarily), since the access-check loading flow can get stuck; keep the option to re-enable invite-only later.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-21",
      "summary": "Make the app usable without any invite-only approval flow (public mode) by default, while keeping the ability for an admin to re-enable invite-only later.",
      "reqIds": [
        "REQ-49"
      ],
      "status": "pending"
    },
    {
      "id": "AR-23",
      "summary": "Update backend access-control query behavior so non-admin users do not trigger authorization traps during normal app startup checks (especially for invite-only mode state).",
      "reqIds": [
        "REQ-51"
      ],
      "status": "pending"
    },
    {
      "id": "AR-24",
      "summary": "Implement the first incremental step of the discrete 4th mode (real APA match logging): add a 4th mode tile on the home screen that navigates to a blank placeholder page/screen (no form fields yet).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-25",
      "summary": "4th mode (real APA match logging): add basic after-the-fact match entry form fields on the placeholder page (e.g., date, opponent, your/their points or score, innings, defensive shots, notes).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-26",
      "summary": "Add a Save button and persistence for the Official/Real APA match log form so entered matches can be stored (beyond in-component state).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-27",
      "summary": "Add backend persistence for the Official/Real APA Match Log entries as a first-class match type that can be saved, listed, fetched, and deleted using the existing match history storage patterns.",
      "reqIds": [
        "REQ-59"
      ],
      "status": "pending"
    },
    {
      "id": "AR-28",
      "summary": "Update the backend API match projection so Official/Real APA match logs are represented in the returned ApiMatch shape with all fields needed for Match History summary cards and Match Details rendering.",
      "reqIds": [
        "REQ-60"
      ],
      "status": "pending"
    },
    {
      "id": "AR-29",
      "summary": "Add backend persistence support for an Official/Real APA match log record type so the app can save exactly the user-entered fields from the Official APA Match Log form (match date, opponent name, your score, their score, points, innings, defensive shots, notes) using the existing match storage APIs (save, list, fetch, delete) and the existing match-history storage pattern.",
      "reqIds": [
        "REQ-64"
      ],
      "status": "pending"
    },
    {
      "id": "AR-30",
      "summary": "Official/Real APA match logging: add fields for both players’ APA skill levels and use them to drive the points-to-win (“out of”) targets for each player so the form can determine/validate the winner based on SL-based goals.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-31",
      "summary": "Add win-calculation logic for Official/Real APA match logs (determine winner based on entered scores vs SL-based points-to-win targets) and use it to update derived stats such as win percentage and enable automatic score-limit/goal adjustment.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-33",
      "summary": "Extend Official/Real APA match log persistence so the derived win outcome can be returned to the frontend for summary rendering and aggregate win-percentage calculations.\n\nBackend changes:\n- Update `backend/main.mo` types for `OfficialApaMatchLog` and `ApiMatch.officialApaMatchLogData` to include an optional derived outcome field (e.g., `didWin : ?Bool`).\n- Update the backend projection in `convertToApiMatch` for `#officialApaMatchLog` so `officialApaMatchLogData` includes this new field.\n- Ensure older saved Official APA logs remain readable (field is optional / absent -> treated as unknown).",
      "reqIds": [
        "REQ-73"
      ],
      "status": "pending"
    },
    {
      "id": "AR-37",
      "summary": "Add conditional migration support for extending stored Official APA match logs with the new optional outcome field.\n\nBackend changes:\n- Update `backend/migration.mo` (conditional migration policy) so existing stable data can be upgraded safely if required by the type change.\n- Ensure the migration does not attempt to retroactively infer outcomes for old records; it should only add the new field as absent/unknown for existing entries.",
      "reqIds": [
        "REQ-77"
      ],
      "status": "pending"
    },
    {
      "id": "AR-38",
      "summary": "Official/Real APA match log: remove the \"Points\" input (user considers it irrelevant); optionally replace it with a \"Match Score\" field/label that aligns with the chart, and update the form/UI and persistence accordingly.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-39",
      "summary": "Official/Real APA match log: compute PPI as myScore ÷ (innings − defensiveShots) and use this formula consistently for any displayed/derived PPI stats for logged matches.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-42",
      "summary": "Add conditional migration support so existing stored Official/Real APA Match Log entries that include a `points` field remain readable after the type change (the migration must drop/ignore the old `points` value without attempting to infer or backfill anything).",
      "reqIds": [
        "REQ-80"
      ],
      "status": "pending"
    },
    {
      "id": "AR-43",
      "summary": "Restore and preserve the Official/Real APA Match Log “out of” functionality so the UI clearly shows each entered score relative to the computed points-to-win target derived from the selected skill level (e.g., “Your Score (out of 38)” and “Their Score (out of 31)”). This must be true on the Official APA Match Log form page.",
      "reqIds": [
        "REQ-82"
      ],
      "status": "pending"
    },
    {
      "id": "AR-44",
      "summary": "Allow editing/updating a previously saved Official/Real APA match log entry (e.g., to fix the match date after saving).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-45",
      "summary": "Add required-field validation for saving Official/Real APA match logs (e.g., prevent save unless required fields like match date are filled; show clear English messages).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-50",
      "summary": "Ensure the backend supports updating an existing Official/Real APA match log record via `updateMatch` and that derived fields (e.g., didWin) remain consistent after edits.",
      "reqIds": [
        "REQ-89"
      ],
      "status": "pending"
    },
    {
      "id": "AR-51",
      "summary": "Official/Real APA match logs: allow innings to be left unknown (e.g., blank/\"—\") for older matches, and when innings (or other required inputs for the formula) are unknown/unparseable, display PPI as unavailable (\"PPI: —\") and avoid attempting PPI calculations for that match.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-52",
      "summary": "Match History: display the match date for each entry and allow sorting the history list by match date.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-54",
      "summary": "Ensure the backend accepts and stores `#officialApaMatchLog` records produced by `buildOfficialApaMatchLog` and that backend type/projection mismatches do not cause traps during save or subsequent read/list operations for Official APA Match Logs.",
      "reqIds": [
        "REQ-97"
      ],
      "status": "pending"
    },
    {
      "id": "AR-58",
      "summary": "Ensure backend access control does not unexpectedly block saving matches in public mode. When `inviteOnlyMode` is disabled, an authenticated (non-anonymous) caller must be able to save and list matches without being rejected as \"must be approved\".",
      "reqIds": [
        "REQ-102"
      ],
      "status": "pending"
    },
    {
      "id": "AR-59",
      "summary": "Straight Shot mode: simplify gameplay tracking/UI to a single user-entered total shots/strokes value (not incremental, no balls-made tracking). Determine outcome as Win if shots <= 20, Loss if shots > 20.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-60",
      "summary": "Fix APA 9-ball practice match-point conversion scoring so it correctly uses the loser’s skill level and the loser’s balls-pocked range per the APA chart when computing the post-match score/result after saving.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-61",
      "summary": "Allow saving an in-progress (not yet complete) APA 9-ball practice match and later reopening it from Match History to resume scoring until completion.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-62",
      "summary": "Fix APA 9-ball Practice match save flow: after match completion, Save button gets stuck on \"Connecting\" and does not persist the match record.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-63",
      "summary": "APA Practice: use a single shared innings field/box (not separate per-player innings) and increment it after Player 2’s turn (i.e., once both players have taken a turn in the inning).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-64",
      "summary": "APA Practice: update the on-screen score immediately as balls are pocketed/unpocketed during rack entry (not only after \"Complete Rack\").",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-65",
      "summary": "APA Practice: track dead balls without adding new buttons by cycling each ball’s state on tap: 1st tap = pocketed by current player, 2nd tap = dead ball, 3rd tap = unpocketed/clear.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-66",
      "summary": "APA 9-ball scorekeeper UI: change the innings label text from \"Shared innings\" to just \"Innings\".",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-67",
      "summary": "APA Practice scoring: if a player is exactly 1 point away from their points-to-win target, pocketing the 9-ball should award only 1 point (otherwise the 9-ball remains worth 2).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-68",
      "summary": "Fix all save flows globally (APA Practice, Accepting Gifts, Straight Shot/20-shot game, Official/Real APA Match Log, and Edit Profile) so save/update buttons never get stuck on \"Connecting\" or become permanently disabled due to stale actor/identity fetching state; allow saving as soon as a usable actor exists; fail fast with clear English error + provide retry when actor/mutation is not ready/hangs.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-69",
      "summary": "Harden backend actor readiness so the UI does not treat background fetching/refetching as “not connected”. Update the actor/query gating so pages can proceed whenever a usable actor instance exists, and only block when the actor is truly null/unavailable.",
      "reqIds": [
        "REQ-146"
      ],
      "status": "pending"
    },
    {
      "id": "AR-70",
      "summary": "Add per-mode Resume Game support (APA Practice, Accepting Gifts, Straight Shot): show a Resume button only when that mode has an in-progress session; starting a new game in that mode prompts to end/replace the current in-progress session; single in-progress slot per mode.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-71",
      "summary": "APA 9-ball Practice: disable/lock the Turn Over button once the rack is complete and the \"Complete Rack\" action/dialog is available, since turns cannot change between racks.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-72",
      "summary": "Official/Real APA Match Log: add/display aPPI (Applied PPI) and compute it using last-20 win% lookup table; for wins use max(actual PPI, table value), for losses use actual PPI; requires capturing/using the table mapping and last-20 win% for the player.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-77",
      "summary": "Implement APA aPPI (applied PPI) logic for APA Practice results/statistics using the user-provided win%→expected PPI lookup table and the “boosted-for-wins” rule: compute last-20 win% for the selected player, use the lookup table to get expected PPI, and compute aPPI such that for wins aPPI is the maximum of (actual PPI, expected PPI) and for losses aPPI is the actual PPI. Integrate this aPPI value anywhere the app currently presents APA Practice performance trends (including the APA aggregate charts), without changing match history persistence.",
      "reqIds": [
        "REQ-160"
      ],
      "status": "pending"
    },
    {
      "id": "AR-78",
      "summary": "Add a new Stats button next to Settings/Edit Profile that opens a tabbed stats panel showing: current Official APA aPPI best-10-of-last-20 rolling average, Official APA PPI best-10-of-last-20 rolling average, Straight Shot rolling average of last 20, Accepting Gifts current/progression (and optionally its last-20 rolling average), plus tabbed line graphs (e.g., Official APA aPPI vs PPI with moving averages; Straight Shot with moving average; Accepting Gifts trend as desired). Best-10-of-last-20 logic applies only to Official APA matches; other modes use simple last-20 rolling averages.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-79",
      "summary": "Change Resume Game button placement so that when it appears, it is shown below the Start New Game button (not above) on Home/mode start pages.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-80",
      "summary": "Add an \"End Session Without Saving\" action under the existing \"End Session & Save\" control in APA Practice, Accepting Gifts, and Straight Shot end-of-session UIs.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-81",
      "summary": "Update Start New Game button styling: use green when no in-progress session exists for that mode; use grey/outline when a Resume session exists. Apply on both Home mode tiles and each mode’s Start page.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-82",
      "summary": "Ensure Resume Game appears below Start New Game everywhere (Home mode tiles and all mode Start pages), without changing resume visibility or navigation behavior.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-83",
      "summary": "Official APA Match Log home tile UX copy cleanup: remove “(Coming Soon)” from the subtitle under the official log title, change the Home tile CTA text to “Log APA Match”, keep the page title/header unchanged, and remove any redundant self-linking start-page button so the Home tile is the only entry CTA.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-89",
      "summary": "Implement the “single-actor fix” to prevent “Connecting…” stalls by ensuring the frontend uses a stable backend actor instance per identity and does not deadlock or permanently disable UI actions due to actor refetching. In particular, update `frontend/src/hooks/useActor.ts` and any dependent logic so: (a) a usable actor is not unnecessarily recreated; (b) background refetching does not force-save buttons into a disabled “connecting” state; and (c) dependent queries are not aggressively invalidated/refetched in a way that causes UI stalls.",
      "reqIds": [
        "REQ-168"
      ],
      "status": "pending"
    },
    {
      "id": "AR-90",
      "summary": "Stats/Aggregate: update APA aggregate stats to use best-10-of-last-20 averaging for PPI metrics; show Average PPI + Average aPPI; hide/remove total innings from stats displays; ensure aPPI “boosted-for-wins / too-many-innings” rule works as previously specified; add predicted/estimated skill level derived from both PPI and aPPI using the user’s aPPI→SL table/ranges.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-91",
      "summary": "Stats/Aggregate charts: add/adjust graphs so (a) PPI trend chart matches the user’s example and includes match dates, and (b) match-results chart shows two lines (your points vs opponent points) plus a defensive-shots line.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-92",
      "summary": "Straight Shot stats: fix missing trend graph; add Lowest Shot Count with date; add a dropdown to switch rolling-average scope between Last 20 Sessions and Lifetime.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-93",
      "summary": "Navigation fixes/enhancements: (1) Aggregate Stats page “Back” should navigate to Stats (not Match History). (2) In Stats ‘Viewing stats for’ section, add a View Match History button under View Player Aggregate Stats. (3) Make Match History header back-link context-aware: Back to Stats when entered from Stats; Back to Home when entered from Home.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-94",
      "summary": "Header UX: add a small loading indicator/state so it’s clear when header actions (e.g., Profile) are still initializing/connecting and don’t appear delayed vs Stats.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-95",
      "summary": "Accepting Gifts mode overhaul to match real gameplay: race-to-7 sets with live Me vs Ghost scoreboard; per-attempt 0–3 input (3=runout/player point, 0–2=ghost point); set-end progression (+1/-1 ball count clamped 2–7); accurate attempts/sets counters; Save only after set ends; saving marks session Completed and produces realistic summaries.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-96",
      "summary": "Fix long login/connection time (5–10 minutes) and related actor initialization delays so the app becomes usable quickly; ensure no permanent Connecting states.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-97",
      "summary": "Fix APA charting: Match Results chart must plot three line series (Your Points, Opponent Points, Defensive Shots) with correct legend symbols matching plotted series and using real match dates.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-98",
      "summary": "Fix PPI Trend chart to plot both PPI and aPPI as two lines with a correct legend (per match, using match dates).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-99",
      "summary": "Straight Shot stats visualization: implement session trend as bar chart with line overlay; add a histogram (shot count on x-axis, frequency on y-axis).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-100",
      "summary": "Match History: add a table view (all modes) with columns in order: Date, Match Results, PPI, Adjusted PPI, Rolling 10/20, APA 10/20, Wins/Losses, Win%; APA rows populate metrics; drills fill non-applicable columns with “—”; include a visible type tag to distinguish APA Match vs APA Practice.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-101",
      "summary": "Straight Shot new summary table by ball level: columns Balls, Wins, Losses, First Win On (or “—” if none).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-102",
      "summary": "Home screen: restore/correct mode tile order as previously intended (undo unintended menu order change).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-103",
      "summary": "Add export capability for match/history/stat tables: Export CSV, Export Excel (.xlsx), and allow choosing which table to export (match list, aggregates, or table view).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-104",
      "summary": "Stats page (Straight Shot tab): remove the Last 20 vs Lifetime dropdown; instead show a non-interactive text line \"Lifetime: [Lifetime Shot Average]\" directly underneath the Last-20 average, styled like the small date text under \"Lowest Shot Count\". Applies specifically to the Straight Shot tab in the aggregate/stats view.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-105",
      "summary": "Accepting Gifts stats: add a \"Performance by Ball Count\" summary showing Wins/Losses per ball level (2–7), derived from saved completed Accepting Gifts sets at each ball-count level (not a Straight Shot stat).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-106",
      "summary": "Stats UI surgical cleanup: remove/delete the incorrect Straight Shot summary box from the Stats → Straight Shot tab (no other Straight Shot graph changes).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-109",
      "summary": "Remove the incorrect Straight Shot summary box/table from the Stats → Straight Shot tab by updating `frontend/src/pages/stats/StatsPage.tsx` so it no longer imports or renders `StraightShotSummaryTable` (or any equivalent summary-box component). Do not remove or modify the Straight Shot Trend chart, histogram, or top-level summary metric cards.",
      "reqIds": [
        "REQ-214"
      ],
      "status": "pending"
    },
    {
      "id": "AR-113",
      "summary": "Keep `extractPlayerApaMatches(...)` producing clean numeric values (or null) for chart-consumed fields for both APA Practice and Official APA matches, and adjust any remaining parsing/coercion so values the user entered in the Official APA match log (scores and defensive shots) reliably reach the chart datasets as numbers when valid.",
      "reqIds": [
        "REQ-218"
      ],
      "status": "pending"
    },
    {
      "id": "AR-114",
      "summary": "Accepting Gifts overhaul (replace existing implementation): implement fixed 12-level progression (2+8, 3+8, 2+9, 3+9, 4+8, 4+9, 5+8, 5+9, 6+8, 6+9, 7+8, 7+9), meaning +8=run any order with called 8-ball finish and +9=strict ascending with 9-ball ending rack; Start screen level selector defaulting to saved currentLevel with optional skipping + resume support; Game screen attempt input range must be 0..(ballCount+1) per user’s latest spec (2+*=0..3, 3+*=0..4, …, 7+*=0..8) and remove old '3 is victory' logic; persist currentLevel (0–11), baselineLevel at match start, and active match for resume; on match end (race-to-7) advance one level on win, and on loss apply baseline/rollback rule (if levelPlayed>baselineLevel keep baseline; if levelPlayed==baselineLevel move baseline down one); add post-match actions Save & Start Next, Save & Exit, Exit Without Saving; Match History table Note column must show \"levelPlayed | baselineLevel | 7-4\" with other non-applicable columns as “—”.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-123",
      "summary": "Update backend/main.mo Accepting Gifts session progression storage so it stores and returns the persisted baseline Accepting Gifts level index per user (0–11) (replacing the meaning of the existing AGSession.currentObjectBallCount). Add/adjust backend methods used by the frontend to get/set this baseline level index, and ensure access control behavior remains unchanged (requires authentication; respects inviteOnlyMode rules).",
      "reqIds": [
        "REQ-230"
      ],
      "status": "pending"
    },
    {
      "id": "AR-124",
      "summary": "Update `frontend/src/lib/apa/apaAggregateStats.ts` `extractPlayerApaMatches(...)` so that for Official APA match-log datapoints (and APA practice datapoints), each chart-consumed numeric field (`ppi`, `appi`, `yourPoints`, `opponentPoints`, `defensiveShots`) is independently cleaned to a `number` when valid and `null` when invalid/unparseable, without dropping the entire datapoint/row. Do not change any underlying PPI/aPPI math, and do not change any date/effective-date logic.",
      "reqIds": [
        "REQ-231"
      ],
      "status": "pending"
    },
    {
      "id": "AR-125",
      "summary": "Add console-only debug taps in ApaAggregateCharts.tsx immediately before each <Line> receives its data prop, logging the final per-series arrays (ppiSeries, appiSeries, yourPointsSeries, opponentPointsSeries, defensiveShotsSeries); keep the existing debug tap in extractPlayerApaMatches unchanged.",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "APA-style pool practice scorekeeper with Accepting Gifts and Straight Shot modes",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}